"use strict";(self.webpackChunktms_frontend=self.webpackChunktms_frontend||[]).push([[2029],{38487:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(64802),l=s(34045);class n{static exportToXlsx(e,t){const s={Sheets:{data:l.P6.json_to_sheet(e)},SheetNames:["data"]},n=l.cW(s,{bookType:"xlsx",type:"array"}),o=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.saveAs(o,t+".xlsx")}static exportAoaToXlsx(e,t){const s=l.P6.aoa_to_sheet(e),n=l.P6.book_new();l.P6.book_append_sheet(n,s,"Sheet1");const o=l.cW(n,{bookType:"xlsx",type:"array"}),c=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.saveAs(c,t+".xlsx")}}},22029:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(72791),l=s(40071),n=s(54261),o=s(78820),c=s(29655),i=s(58241),r=(s(64802),s(16871)),d=s(80184);const m=function(e){var t,s,l;let{list:n,setBatchPop:m,setChartData:u,setExcelData:x,updater:p,setUpdater:h,syncId:v,setSyncId:f}=e;const{userData:y}=(0,i.aC)(),[g,j]=(0,a.useState)(!1),[b,N]=(0,a.useState)([]),[w,S]=(0,a.useState)([]),[k,A]=(0,a.useState)([]),[D,I]=(0,a.useState)([]),{id:T}=(0,r.UO)(),[C,P]=(0,a.useState)([]),[E,R]=(0,a.useState)([]),[O,U]=(0,a.useState)([]),[_,B]=(0,a.useState)(!1);var L=[],Y=[],F=[],M=[],z=[];(0,a.useEffect)((()=>{"init"!==p.status&&(J(v.batch,v.assessment),h({...p,status:"init"}))}),[p]);const J=async(e,t)=>{const s={assessmentId:t,batchId:e};var a;let l=new URLSearchParams(Object.entries(s)).toString();a=await fetch("".concat("http://localhost:8000","/api/userBatchAnswers/getReport?access_token=").concat(null===y||void 0===y?void 0:y.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:l});const n=await a.json();if(a.ok)if(404===n.code)console.error(n.msg);else if(null!==n&&void 0!==n&&n.value){P(n.data);var o=n.data;q(o,e,t)}else c.Am.warn("No reports available!! Try again later");else console.log("er")},q=(e,t,s)=>{var a,l,n;null===e||void 0===e||e.reportData.map(((l,o)=>{var c,i,r,d;a={timestamp:l.createdDate,program:null===e||void 0===e||null===(c=e.teamInfo)||void 0===c?void 0:c.programName,facilitator:null===e||void 0===e||null===(i=e.teamInfo)||void 0===i?void 0:i.tranineeName,batchId:t,assessmentId:s,participantName:l.fullName,employeeCode:l.employeeId,email:l.email,score:"".concat(l.obtainMarks," / ").concat(l.totalMarks),region:l.branchName,result:l.result,avgscore:""},n={program:null===e||void 0===e||null===(r=e.teamInfo)||void 0===r?void 0:r.programName,facilitator:null===e||void 0===e||null===(d=e.teamInfo)||void 0===d?void 0:d.tranineeName,timestamp:l.createdDate.substring(0,10),participantName:l.fullName,employeeCode:l.employeeId,email:l.email,contact:null===l||void 0===l?void 0:l.contactNo,score:l.obtainMarks,region:l.branchName,result:l.result};JSON.parse(l.answerResponseBunch).map(((e,t)=>{var s;s="multiopt"==e.questionType?(null===e||void 0===e?void 0:e.selectedAnswer.join())||(null===e||void 0===e?void 0:e.selectedOption.join()):(null===e||void 0===e?void 0:e.selectedAnswer)||(null===e||void 0===e?void 0:e.selectedOption);var a={};return a={...a,["question".concat(t+1)]:s},n={...n,...a},e}));if(L.push(parseInt(l.obtainMarks)),M.push(JSON.parse(l.answerResponseBunch)),Y.push(a),Y.length==e.reportData.length)L.reduce(((e,t)=>e+t),0),L.length;return F.push(n),l}));S(Y),"init"!==p.status&&x(Y),Y=[],A(F);M.map((e=>e.map((e=>(l={label:e.question,data:e.selectedOption,type:e.questionType,options:e.answers},z.push(l))))));Z(z)},Z=e=>{const t=e.reduce(((e,t)=>{const s=e.find((e=>e.label===t.label));if(s){const a=s.data.push(t.data);t.label,t.type,t.options;return e}{const s={label:t.label,data:[t.data],type:t.type,options:t.options};return e.concat([s])}}),[]);for(var s=[],a=[],l=(t.map((e=>(a.push(e.label),e))),[]),n=0;n<=s.length;n++){var o;o={...Y[n],...s[n]},l.push(o)}a=["Program Title","Facilitator","Date","Employee Name","EmployeeId","Email","Contact","Score","Region","Result",...a],R(a),N(t),j(!0)};return"".concat(null===C||void 0===C||null===(t=C.assessmentRes)||void 0===t?void 0:t.assessmentType,"_assessment_").concat(null===C||void 0===C||null===(s=C.assessmentRes)||void 0===s?void 0:s.name,"_").concat(null===C||void 0===C||null===(l=C.teamInfo)||void 0===l?void 0:l.tranineeName),(0,d.jsx)(d.Fragment,{children:g?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{children:(0,d.jsxs)("button",{onClick:()=>{x(w),m(!0),B(!1)},type:"button",className:"flex w-fit items-center justify-center bg-green-500 py-2 rounded-md px-5 text-sm  text-white font-medium",children:[(0,d.jsx)(o.gbC,{className:"text-xl mr-1"})," Preview Report"]})})}):(0,d.jsxs)("button",{type:"button",onClick:()=>{J(n.batchId,n.assessmentId)},className:" text-gray-600  flex items-center justify-center space-x-1 text-2xl hover:underline",children:[(0,d.jsx)(o.dsJ,{}),(0,d.jsx)("p",{className:"text-sm mb-0.5",children:"Track Report"})]})})};const u=function(e){let{next:t,previous:s,pgindex:l,page:c,totalCount:i,setLimit:r,setPage:u,setSearch:x,setBatchPop:p,setChartData:h,assessmentsList:v,id:f,setExcelData:y,updater:g,setUpdater:j,syncId:b,setSyncId:N,batchAttendences:w,setAttendancePop:S,attendancePop:k}=e;const[A,D]=(0,a.useState)("Fetching...");return console.log("batchAttendences",w),(0,a.useEffect)((()=>{const e=setTimeout((()=>{D("No Data Found...")}),1e4);return()=>clearTimeout(e)}),[]),console.log(w,"batchAttendencesbatchAttendencesbatchAttendencesbatchAttendences"),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("h5",{className:"text-2xl font-medium text-center leading-none text-gray-700 ",children:"Live Batch Report Preview"}),(0,d.jsxs)("div",{className:"flex flex-row  w-full justify-between items-center",children:[(0,d.jsx)("div",{className:"px-2  flex w-full justify-between   ",children:(0,d.jsxs)("h5",{className:"text-lg  font-medium leading-none text-gray-700 ",children:["Report List of Batch Id: ",f]})}),(0,d.jsxs)("div",{className:"relative mt-1 ",children:[(0,d.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none py-2 ",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-gray-500 ",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,d.jsx)("input",{type:"text",id:"table-search",className:"bg-gray-50 border py-1 outline-none border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-sky-500 focus:border-sky-500 block w-80 pl-10 p-2.5  ",placeholder:"Search by Assessments",onChange:e=>x(e.target.value)})]})]}),(0,d.jsx)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg mt-3",children:(0,d.jsxs)("table",{className:"w-full text-sm  text-center text-gray-500 ",children:[(0,d.jsx)("thead",{className:"text-xs text-white uppercase bg-sky-500  ",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Assessment"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Type"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Batch Id"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Date"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Client Name"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Download Report"})]})}),0==(null===v||void 0===v?void 0:v.length)?(0,d.jsx)("tbody",{children:(0,d.jsxs)("tr",{className:"border-b  text-lg font-medium odd:bg-white even:bg-gray-50 ",children:[(0,d.jsx)("td",{className:"px-6 py-4",children:" "}),(0,d.jsx)("td",{className:"px-6 py-4",children:" "}),(0,d.jsx)("td",{className:"px-6 py-4",children:A}),(0,d.jsx)("td",{className:"px-6 py-4",children:" "}),(0,d.jsx)("td",{className:"px-6 py-4",children:" "}),(0,d.jsx)("td",{className:"px-6 py-4",children:" "})]})}):(0,d.jsx)(d.Fragment,{children:null===v||void 0===v?void 0:v.map((e=>{var t;return(0,d.jsx)("tbody",{className:"text-center",children:(0,d.jsxs)("tr",{className:"border-b   odd:bg-white even:bg-gray-50 odd: even:",children:[(0,d.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900  whitespace-nowrap",children:e.name}),(0,d.jsx)("td",{className:"px-6 py-4",children:e.assessmentType}),(0,d.jsx)("td",{className:"px-6 py-4",children:e.batchId}),(0,d.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e||null===(t=e.createdDate)||void 0===t?void 0:t.substring(0,10)}),(0,d.jsx)("td",{className:"px-6 py-4",children:e.clientName}),(0,d.jsx)("td",{className:"relative flex flex-row px-6 text-center py-4 justify-center items-center space-x-6  mt-2",children:(0,d.jsx)(m,{list:e,setBatchPop:p,setChartData:h,setExcelData:y,updater:g,setUpdater:j,syncId:b,setSyncId:N})})]})},(0,n.Z)())}))})]})}),(0,d.jsx)("h5",{className:"text-lg py-5 font-medium leading-none text-gray-700 ",children:"Attendance Data"}),(0,d.jsx)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:(0,d.jsxs)("table",{className:"w-full text-sm border-b  text-center text-gray-500 ",children:[(0,d.jsx)("thead",{className:"text-xs text-white uppercase bg-sky-500  ",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"BatchId"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3",children:"View Attendance"})]})}),w?(0,d.jsx)(d.Fragment,{children:w.length>=0&&(0,d.jsx)("tbody",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"py-3",children:f}),(0,d.jsx)("td",{className:"py-3"}),(0,d.jsx)("td",{className:"relative flex flex-row px-6 text-center py-4 justify-center items-center space-x-6  mt-2",children:(0,d.jsxs)("button",{type:"button",onClick:()=>{S(!0)},className:" text-gray-600  flex items-center justify-center space-x-1 text-2xl hover:underline",children:[(0,d.jsx)(o.dsJ,{}),(0,d.jsx)("p",{className:"text-sm mb-0.5",children:"Track Report"})]})})]})})}):(0,d.jsx)("tbody",{children:(0,d.jsx)("tr",{children:(0,d.jsx)("td",{className:"text-center py-3",colSpan:2,children:"Fetching..."})})})]})})]})};const x=function(e){var t,s;let{excelData:a,setUpdater:l,setSyncId:c}=e;return(0,d.jsxs)("div",{className:"mt-10 relative",children:[(0,d.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,d.jsxs)("div",{className:"flex flex-col w-fit my-3  bg-white  px-2",children:[(0,d.jsxs)("h2",{className:"text-xl font-bold text-gray-800 capitalize ",children:["Program Name: ",null===(t=a[0])||void 0===t?void 0:t.program]}),(0,d.jsxs)("p",{className:"font-medium text-md text-gray-700",children:["Trainer: ",null===(s=a[0])||void 0===s?void 0:s.facilitator]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{className:"text-xl font-bold text-gray-800 capitalize mb-1",children:["Total responses: ",(null===a||void 0===a?void 0:a.length)||0]}),(0,d.jsxs)("button",{onClick:()=>{var e,t;c({batch:null===(e=a[0])||void 0===e?void 0:e.batchId,assessment:null===(t=a[0])||void 0===t?void 0:t.assessmentId}),l({status:"refresh",id:(0,n.Z)()})},className:"flex w-fit items-center justify-center text-md mb-2 text-white bg-sky-500 rounded-md px-2 pb-1",children:["Sync Data",(0,d.jsx)(o.U8$,{className:" ml-2 text-2xl mt-1"})]})]})]}),(0,d.jsx)("div",{id:"journal-scroll",className:"flex w-full overflow-y-auto  max-h-[25rem] pt-1",children:(0,d.jsxs)("table",{className:"w-full text-sm font-medium text-left text-gray-700",children:[(0,d.jsx)("thead",{className:"text-xs text-gray-700 uppercase  bg-gray-50 ",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Time Stamp"}),(0,d.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Employee Name"}),(0,d.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Employee Id"}),(0,d.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Region"}),(0,d.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Status"})]})}),(0,d.jsx)("tbody",{children:a.map((e=>{var t,s;return(0,d.jsxs)("tr",{className:"bg-white  border-b ",children:[(0,d.jsx)("th",{scope:"row",className:"py-4 px-6 font-medium text-gray-600 whitespace-nowrap ",children:null===e||void 0===e||null===(t=e.timestamp)||void 0===t||null===(s=t.replace("T"," "))||void 0===s?void 0:s.substring(0,19)}),(0,d.jsx)("td",{className:"py-4 px-6",children:null===e||void 0===e?void 0:e.participantName}),(0,d.jsx)("td",{className:"py-4 px-6",children:null===e||void 0===e?void 0:e.employeeCode}),(0,d.jsx)("td",{className:"py-4 px-6",children:null===e||void 0===e?void 0:e.region}),(0,d.jsx)("td",{className:"py-4 px-6 text-green-500 font-semibold",children:"Submitted"})]},(0,n.Z)())}))})]})})]})};var p=s(7692),h=s(72426),v=s.n(h),f=s(38487);const y=function(e){let{session:t}=e;const[s,n]=(0,a.useState)([]),[o,m]=(0,a.useState)(!1),[h,y]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),{userData:b,signOut:N}=(0,i.aC)(),[w,S]=(0,a.useState)(0),[k,A]=(0,a.useState)(),[D,I]=(0,a.useState)([]),[T,C]=(0,a.useState)([]),[P,E]=(0,a.useState)({status:"init",id:"0"}),[R,O]=(0,a.useState)(null),[U,_]=(0,a.useState)([]),[B,L]=(0,a.useState)("Absent"),[Y,F]=(0,a.useState)(5),[M,z]=(0,a.useState)(0),[J,q]=(0,a.useState)([]),[Z,W]=(0,a.useState)([]),[V,X]=(0,a.useState)({}),[H,G]=(0,a.useState)(!1),[$,K]=(0,a.useState)(""),[Q,ee]=(0,a.useState)(""),[te,se]=(0,a.useState)(!1),[ae,le]=(0,a.useState)(null),[ne,oe]=(0,a.useState)(null),[ce,ie]=(0,a.useState)(null),[re,de]=(0,a.useState)([]),[me,ue]=(0,a.useState)(null);let{batchId:xe}=(0,r.UO)(),pe=xe.split("&");xe=pe[0],(0,a.useEffect)((()=>{he()}),[g,Y,w,P]),(0,a.useEffect)((()=>{we()}),[ne]);const he=async()=>{var e=await fetch("".concat("http://localhost:8000","/api/userBatchAnswers/listOfReport/").concat(xe,"?access_token=").concat(null===b||void 0===b?void 0:b.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});const t=await e.json();if(!e.ok){const s=t&&t.message||e.statusText;return Promise.reject(s)}var s;404===t.code?console.error(t.msg):(n(t.data),A((null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.length)||0))},ve=k-5,fe=async()=>{try{var e=await fetch("".concat("http://localhost:8000","/api/batchAttendences/all/").concat(xe,"?access_token=").concat(null===b||void 0===b?void 0:b.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"GET"});const t=await e.json();if(!e.ok){const s=t&&t.message||e.statusText;return Promise.reject(s)}404===t.code?console.error(t.msg):_(t.data.allBatchAttendence)}catch(t){console.log(t)}},ye=async()=>{try{const s={limit:Y,start:M,search:g},a=encodeURIComponent(JSON.stringify(s)),l=await fetch("".concat("http://localhost:8000","/api/batchAttendences/listAttendenceofLiveTrackingLinks/").concat(xe,"?filter=").concat(a,"&access_token=").concat(null===b||void 0===b?void 0:b.accessToken)),n=await l.json();var e,t;if("success"===(null===n||void 0===n?void 0:n.status))q(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.result),console.log("data-----------------fetchBatchPeopleList ---------is "+(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.result))}catch(s){console.log(s)}};function ge(e){var t=[];null===s||void 0===s||s.map((s=>(s.batchId==e&&(t=[...t,s]),s)));de(t)}const je=()=>{be(xe),ue(xe),ge(xe),fe(),ye(),Ne()};(0,a.useEffect)((()=>{ue(xe),ge(xe),fe(),je()}),[xe,s,M]);const be=async e=>{try{const t=await fetch("".concat("http://localhost:8000","/api/batches/batchDetails/").concat(e,"?access_token=").concat(null===b||void 0===b?void 0:b.accessToken)),s=await t.json();if(200!==(null===s||void 0===s?void 0:s.code)){throw s&&(null===s||void 0===s?void 0:s.message)||t.statusText}X(null===s||void 0===s?void 0:s.data)}catch(t){console.log(t)}},Ne=()=>{for(var e=v()(null===V||void 0===V?void 0:V.batchStartDate),t=v()(null===V||void 0===V?void 0:V.batchEndDate),s=[],a=e.clone();a.isSameOrBefore(t);){var l=a.format("YYYY-MM-DD");s.push(l),a.add(1,"days")}W(s)},we=async()=>{if(""===ne)return!1;try{const s={limit:Y,start:M,search:g},a=encodeURIComponent(JSON.stringify(s)),l=await fetch("".concat("http://localhost:8000","/api/batchAttendences/daysWiseAttendenceofLiveTrackingLinks/").concat(xe,"?date=").concat(ne,"&filter=").concat(a,"&access_token=").concat(null===b||void 0===b?void 0:b.accessToken)),n=await l.json();var e,t;if("success"===(null===n||void 0===n?void 0:n.status))q(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.result),console.log("data-----------------fetchBatchPeopleList ---------is "+(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.result))}catch(s){console.log(s)}};(0,a.useEffect)((()=>{V&&Ne()}),[V]),(0,a.useEffect)((()=>{me&&ye()}),[me,Y,M,g]);const Se=e=>{let t=[["Sr.No","Emp. Id","Full Name","Function","Zone","Supervisor Name","Supervisor Email","Job Family","Batch Id","Day1","Day2","Day3","Day4","Day5","Total Days","Total Present Days","Complete/Not complete","Total Learning Hours","Learning hours","Feedback on 5 point scale","Assessment Score (Only Day 5)"]];e.forEach(((e,s)=>{let a=[s+1,e.employeeId||"",e.firstName?"".concat(e.firstName," ").concat(e.lastName||""):"",e.function||"",e.zone||"",e.managerName||"",e.managerEmail||"",e.product||"",e.batchId||"",e.day1||"A",e.day2||"A",e.day3||"A",e.day4||"A",e.day5||"A",e.totalDays||"",e.totalPresentDays||"","-",e.totalLearningHours||"","Learning hours","Feedback on 5 point scale","Assessment Score (Only Day 5)"];t.push(a)})),console.log(t),f.Z.exportAoaToXlsx(t,"Attendance-Report-".concat(Date.now()))};return(0,d.jsxs)("div",{className:"flex flex-col w-full mt-5 px-6 h-[10rem]",children:[h?(0,d.jsx)("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center bg-gray-800/40",children:(0,d.jsx)("div",{className:"flex w-full items-start justify-center px-6  h-screen mt-20",children:(0,d.jsx)("div",{className:"relative mx-10  flex flex-col  w-full items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:(0,d.jsxs)("div",{id:"journal-scroll",className:"w-full h-[30rem] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mt-5 mb-4",children:[(0,d.jsx)("h5",{className:"text-xl font-semibold  leading-none text-gray-700 ",children:"Attendence List"}),(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsxs)("select",{onChange:e=>{var t;oe(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},className:"px-4 py-2 mr-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",children:[(0,d.jsx)("option",{value:"",children:"Select Date"}),Z.map(((e,t)=>(0,d.jsx)("option",{value:e,children:v()(e).format("YYYY-MM-DD")},t)))]}),(0,d.jsx)("button",{className:"px-3 py-2 text-white text-sm font-medium bg-green-500 items-center rounded-md mr-2",onClick:()=>{(async e=>{try{const s=await fetch("".concat("http://localhost:8000","/api/batchAttendences/liveTrackingAttendence/").concat(e,"?access_token=").concat(null===b||void 0===b?void 0:b.accessToken));if(!s.ok){const e=a&&a.message||s.statusText;return console.log("error",s.statusText),Promise.reject(e)}const a=await s.json();if(console.log("data++++++++++++++++",a),"failure"===a.status)return void c.Am.error(null===a||void 0===a?void 0:a.msg);var t=a;console.log("allExportAttendenceData++++++++++++++++",t),Se(t)}catch(s){console.error("There was an error!",s),"Token Expired"!==s&&"Malformed User"!==s||N()}})(me)},children:"Export"}),(0,d.jsx)("button",{className:"px-1 py-1 mr-1 text-white text-sm font-medium bg-green-500 items-center rounded-md w-80",onClick:()=>G(!0),children:"Add Attendence"}),(0,d.jsx)("div",{className:"cursor-pointer mt-2",onClick:je,children:(0,d.jsx)(p.t5J,{size:30})}),(0,d.jsx)(l.bjh,{onClick:()=>{F(5),z(0),je(),y(!1)},className:"cursor-pointer text-xl font-semibold text-black ml-10",size:50})]})]}),(0,d.jsx)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg mt-3",children:(0,d.jsxs)("table",{className:"w-full text-sm text-left text-gray-500",children:[(0,d.jsx)("thead",{className:"text-md m-4 bg-sky-600 text-white",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Name"}),(0,d.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Email"}),(0,d.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Employee Id"}),(0,d.jsx)("th",{scope:"col",className:"px-3 py-2",children:"BatchStatus"}),(0,d.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Status"}),(0,d.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Attendance"}),(0,d.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Attendance Date"})]})}),null===J||void 0===J?void 0:J.map(((e,t)=>{var s,a,l;return(0,d.jsx)("tbody",{children:(0,d.jsxs)("tr",{className:"bg-white border-b  ",children:[(0,d.jsx)("td",{className:"px-3 py-2 text-gray-900",children:null!==e&&void 0!==e&&e.nominee?null===e||void 0===e||null===(s=e.nominee)||void 0===s?void 0:s.firstName:null===e||void 0===e?void 0:e.firstName}),(0,d.jsx)("td",{className:"px-3 py-2 text-gray-900",children:null!==e&&void 0!==e&&e.nominee?null===e||void 0===e||null===(a=e.nominee)||void 0===a?void 0:a.email:null===e||void 0===e?void 0:e.email}),(0,d.jsx)("td",{className:"px-3 py-2 text-gray-900",children:null!==e&&void 0!==e&&e.nominee?null===e||void 0===e||null===(l=e.nominee)||void 0===l?void 0:l.employeeId:null===e||void 0===e?void 0:e.employeeId}),(0,d.jsx)("td",{className:"px-3 py-2 text-gray-900",children:"Outside"===(null===e||void 0===e?void 0:e.batchNominees)?(0,d.jsx)("span",{className:"bg-gray-300 text-green-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-600",children:"Outside"}):(0,d.jsx)("span",{className:"bg-cyan-100 text-red-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-600",children:"Inside"})}),(0,d.jsx)("td",{className:"px-1 py-2",children:"Present"===(null===e||void 0===e?void 0:e.attendenceStatus)?(0,d.jsx)("span",{className:"bg-green-100 text-green-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-600",children:"Present"}):(0,d.jsx)("span",{className:"bg-red-100 text-red-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-600",children:"Absent"})}),(0,d.jsxs)("td",{className:"flex items-center px-1 py-2",children:[(0,d.jsxs)("select",{className:"px-2 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",onChange:e=>{var t;return L(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},children:[(0,d.jsx)("option",{value:"Present",children:"Present"}),(0,d.jsx)("option",{value:"Absent",children:"Absent"})]}),(0,d.jsx)("span",{className:"bg-blue-500 text-xs font-medium ml-2 mr-2 px-2 py-2 rounded text-white",onClick:t=>(async(e,t)=>{if("Update"===t)try{var s,a;let t=new URLSearchParams({attendenceStatus:B}).toString();const l=await fetch("".concat("http://localhost:8000","/api/batchAttendences/updateAttendence/").concat(null===e||void 0===e?void 0:e.attendenceId,"?access_token=").concat(null===b||void 0===b?void 0:b.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"PUT",body:t}),n=await l.json();if("failure"===(null===n||void 0===n?void 0:n.status)||404===(null===n||void 0===n||null===(s=n.error)||void 0===s?void 0:s.statusCode))return c.Am.error(null===n||void 0===n?void 0:n.msg);"success"===(null===n||void 0===n||null===(a=n.result)||void 0===a?void 0:a.status)&&(c.Am.success("Attendence submitted successful."),je())}catch(l){console.log(l)}else try{let t=new URLSearchParams({employeeId:null===e||void 0===e?void 0:e.employeeId,batchId:null===e||void 0===e?void 0:e.batchId}).toString();const s=await fetch("".concat("http://localhost:8000","/api/batchAttendences/addAttendenceforAxis?access_token=").concat(null===b||void 0===b?void 0:b.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:t}),a=await s.json();if("failure"===a.status)return c.Am.error(null===a||void 0===a?void 0:a.msg);je(),c.Am.success("Attendence submitted successful."),K(""),le(null)}catch(l){console.log(l)}finally{se(!1)}})(e,null!==e&&void 0!==e&&e.attendenceId?"Update":"Add"),children:null!==e&&void 0!==e&&e.attendenceId?"Update":"Add"})]}),(0,d.jsx)("td",{className:"px-3 py-4 text-gray-900",children:null!==e&&void 0!==e&&e.attendenceDate?v()(null===e||void 0===e?void 0:e.attendenceDate).format("YYYY-MM-DD"):"-"})]})},t+1)}))]})}),(0,d.jsxs)("div",{className:"flex flex-row justify-around mt-5 items-center  ",children:[(0,d.jsx)("span",{className:"text-sm flex text-gray-700 "}),(0,d.jsx)("div",{className:"flex",children:(0,d.jsxs)("div",{className:"dropdown flex items-center relative",children:[(0,d.jsx)("p",{children:"Show"}),(0,d.jsx)("span",{className:"bg-gray-100 text-gray-700 mx-2  font-normal tracking-wide rounded inline-flex items-center",children:(0,d.jsxs)("select",{className:"bg-transparent px-3 py-2  outline-none ",onChange:e=>{F(e.target.value),z(0)},children:[(0,d.jsx)("option",{className:"mr-1",children:"5"}),(0,d.jsx)("option",{className:"mr-1",children:"10"}),(0,d.jsx)("option",{className:"mr-1",children:"20"}),(0,d.jsx)("option",{className:"mr-1",children:"30"}),(0,d.jsx)("option",{className:"mr-1",children:"40"}),(0,d.jsx)("option",{className:"mr-1",children:"50"}),(0,d.jsx)("option",{className:"mr-1",children:"100"}),(0,d.jsx)("option",{className:"mr-1",children:"250"}),(0,d.jsx)("option",{className:"mr-1",children:"500"})]})}),(0,d.jsx)("p",{children:"Entries"})]})})]})]})})})}):null,o?(0,d.jsx)("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center bg-gray-800/40",children:(0,d.jsx)("div",{className:"flex w-full items-start mt-4 justify-center px-6  h-screen",children:(0,d.jsxs)("div",{className:"relative mx-10  flex flex-col  w-full items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[(0,d.jsx)("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-4 ",children:(0,d.jsx)(l.bjh,{onClick:()=>m(!1),className:"cursor-pointer text-xl font-semibold text-black "})}),(0,d.jsx)("div",{className:"w-full h-[34rem]",children:(0,d.jsx)(x,{excelData:T,setUpdater:E,setSyncId:O})})]})})}):null,(0,d.jsx)(u,{assessmentsList:re,next:()=>{M>=ve||z(M+1)},previous:()=>{M<=0||z(M-1)},pgindex:ve,setExcelData:C,page:w,totalCount:k,setLimit:F,setPage:S,setSearch:j,id:me,setBatchPop:m,setChartData:I,updater:P,setUpdater:E,syncId:R,setSyncId:O,batchAttendences:U,setAttendancePop:y,attendancePop:h}),H&&(0,d.jsx)("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center bg-gray-800/40",children:(0,d.jsx)("div",{className:"flex w-full items-center mt-20 justify-center ",children:(0,d.jsxs)("div",{className:"relative mx-10 flex flex-col items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[(0,d.jsx)("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-2 ",children:(0,d.jsx)(l.bjh,{onClick:()=>{ie(null),ee(""),le(""),G(!1)},className:"cursor-pointer text-2xl font-semibold text-black "})}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"rounded overflow-hidden shadow-lg p-5 bg-[white] ",children:[(0,d.jsx)("h1",{className:"text-xl text-700",children:"Attendence Form"}),(0,d.jsx)("br",{}),(0,d.jsx)("form",{onSubmit:async e=>{le(null),e.preventDefault();try{const e=encodeURIComponent(JSON.stringify({employeeId:Q})),l=await fetch("".concat("http://localhost:8000","/api/nominees/getNomineeById?filter=").concat(e,"&access_token=").concat(null===b||void 0===b?void 0:b.accessToken)),n=await l.json();if(!Object.keys(null===n||void 0===n?void 0:n.data).length)throw Error("Employee not found");var t,s,a;console.log(n,"fetchEmployeeDetails"),le({email:null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.email,name:(null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.firstName)+" "+(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.lastName)})}catch(l){c.Am.error(null===l||void 0===l?void 0:l.message)}},children:(0,d.jsxs)("div",{className:"w-100 flex flex-wrap",children:[(0,d.jsxs)("div",{className:"px-2",children:[(0,d.jsx)("label",{className:"leading-loose",children:"Employee Id"}),(0,d.jsx)("input",{type:"text",name:"email",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Provide Employee Id",required:!0,value:Q,onChange:e=>ee(e.target.value)})]}),(0,d.jsx)("div",{className:"py-1 mt-7 space-x-4",children:(0,d.jsx)("button",{type:"submit",className:"bg-[#97144c] flex-inline justify-center items-center text-white px-4 py-1 rounded-md focus:outline-none",children:"Find"})})]})}),(0,d.jsxs)("form",{onSubmit:async e=>{if(se(!0),e.preventDefault(),ae)try{let t=new URLSearchParams({employeeId:Q,batchId:me,attendenceDate:v()(ce).format("YYYY-MM-DD")}).toString();const s=await fetch("".concat("http://localhost:8000","/api/batchAttendences/addDateWiseAttendence?access_token=").concat(null===b||void 0===b?void 0:b.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:t}),a=await s.json();if("failure"===(null===a||void 0===a?void 0:a.status))return e.target.reset(),ee(""),c.Am.error(null===a||void 0===a?void 0:a.msg);c.Am.success("Attendence submitted successful."),e.target.reset(),ee("")}catch(t){console.log(t)}finally{le(null),se(!1),G(!H)}else c.Am.error("Employee not found")},children:[(0,d.jsxs)("div",{className:"px-2",children:[(0,d.jsx)("label",{className:"leading-loose",children:"Full name"}),(0,d.jsx)("input",{name:"fullName",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Provide full name",required:!0,disabled:!0,defaultValue:null===ae||void 0===ae?void 0:ae.name})]}),(0,d.jsxs)("div",{className:"px-2",children:[(0,d.jsx)("label",{className:"leading-loose",children:"Email"}),(0,d.jsx)("input",{name:"email",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Provide email",required:!0,disabled:!0,defaultValue:null===ae||void 0===ae?void 0:ae.email})]}),(0,d.jsxs)("div",{className:"px-2",children:[(0,d.jsx)("label",{className:"leading-loose",children:"Date"}),(0,d.jsxs)("select",{required:!0,onChange:e=>{var t;ie(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},className:"px-4 py-2 mr-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",children:[(0,d.jsx)("option",{value:"",children:"Select Date"}),Z.map(((e,t)=>(0,d.jsx)("option",{value:e,children:v()(e).format("YYYY-MM-DD")},t)))]})]}),(0,d.jsx)("div",{className:"py-4  space-x-4 px-2",children:(0,d.jsx)("button",{type:"submit",className:"bg-[#97144c] flex-inline justify-center items-center text-white px-4 py-2 rounded-md focus:outline-none",disabled:te,children:"Submit"})})]})]})})})]})})})]})}}}]);
//# sourceMappingURL=2029.f5682b36.chunk.js.map