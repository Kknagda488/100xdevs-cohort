"use strict";(self.webpackChunktms_frontend=self.webpackChunktms_frontend||[]).push([[5083],{25083:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var s=a(72791),n=a(40071),o=a(43623),l=a(24376),r=a.n(l),i=a(25498),c=a.n(i),d=a(54261),u=a(78820),h=a(81213),p=a(74819),m=a(64802),g=a(34045),x=a(76897),f=a(80184);const y=function(e){let{bars:t,headLabel:a,averages:n}=e;console.log(t,a,n,"bars, headLabel, averages");const l=(0,s.useRef)(null),i={labels:a,datasets:t},d={responsive:!0,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"Parameter Trending in (%)"},datalabels:{formatter:function(e,t){return 0==e?"":"".concat(e)},color:"black",font:{size:8.9},anchor:"end",align:"top"}},scales:{x:{ticks:{maxRotation:80,minRotation:80,font:{size:13},display:!0,autoSkip:!1,callback:function(e,t,a){var s=this.getLabelForValue(e);if(/\s/.test(s)){for(var n=0,o=s.split(" "),l=0;l<o.length;l++)""!=o[l]&&(n+=1);var r=o.slice(0,n/2+2).join(" ").length,i=".{1,".concat(r,"}"),c=new RegExp(i,"g");return console.log(c,"ooo"),s.match(c)}return s}}},y:{suggestedMin:0,suggestedMax:105,fontSize:70}},layout:{padding:2}};return(0,f.jsx)("div",{className:"flex flex-col justify-center items-center",children:(0,f.jsxs)("div",{className:"flex flex-col justify-center items-center",style:{width:1100},children:[(0,f.jsx)("button",{className:"text-md font-normal text-white px-3 w-fit py-1 rounded-md my-3 bg-sky-500",onClick:()=>(async e=>{const t=document.querySelector("#overview");if(!t)return;const a=(await c()(t)).toDataURL("image/png"),s=document.querySelector("#title01").innerHTML;r()(a,"Overview_".concat(s,".png"),"image/png")})(),children:"Download Overview Chart"}),(0,f.jsx)(o.$Q,{ref:l,id:"overview",data:i,width:40,height:25,options:d,plugins:[h.Z]})]})})};function v(e){let{headLabel:t,averages:a}=e;const s=t;console.log("---------------------------------------",a,t);const n={labels:s,datasets:[{label:"Average Score",data:a,backgroundColor:"#383191"}]},l={responsive:!0,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"Parameter wise Average Trending"},datalabels:{formatter:function(e,t){return 0==e?"":e},color:"white",scales:{y:{suggestedMin:0,suggestedMax:10}}}},scales:{x:{ticks:{maxRotation:80,minRotation:80,callback:function(e,t,a){var s=this.getLabelForValue(e);if(/\s/.test(s)){for(var n=0,o=s.split(" "),l=0;l<o.length;l++)""!=o[l]&&(n+=1);var r=o.slice(0,n/2+2).join(" ").length,i=".{1,".concat(r,"}"),c=new RegExp(i,"g");return console.log(c,"ooo"),s.match(c)}return s}}}}};return(0,f.jsxs)("div",{className:"flex flex-col justify-center items-center",style:{width:1100},children:[(0,f.jsx)("button",{className:"text-md font-normal text-white px-3 w-fit py-1 rounded-md my-3 bg-sky-500",onClick:()=>(async e=>{const t=document.querySelector("#average");if(!t)return;const a=(await c()(t)).toDataURL("image/png"),s=document.querySelector("#title01").innerHTML;r()(a,"Percentage_".concat(s,".png"),"image/png")})(),children:"Download Average Chart"}),(0,f.jsx)(o.$Q,{id:"average",width:40,height:25,options:l,data:n,plugins:[h.Z]})]})}p.kL.register(p.uw,p.f$,p.ZL,p.Dx,p.u,p.De);const b=function(){return(0,f.jsxs)("div",{className:"flex justify-center items-center w-full mb-2",role:"status",children:[(0,f.jsxs)("svg",{"aria-hidden":"true",className:"mr-2 w-8 h-8 text-gray-200 animate-spin  fill-sky-500",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(0,f.jsx)("span",{className:"text-md text-sky-500 font-medium",children:"Please Wait..."})]})};p.kL.register(p.uw,p.f$,p.ZL,p.Dx,p.u,p.De);const w=function(e){var t,a,n,l,i,p,m,w,j;let{chartData:N,excelData:S,batchData:k}=e;console.log(N,"chartData-chartData");const[C,D]=(0,s.useState)([]),[R,O]=(0,s.useState)(!1),[F,T]=(0,s.useState)(!1),[M,P]=(0,s.useState)(!1),[I,A]=(0,s.useState)([]),[q,J]=(0,s.useState)([]),[B,_]=(0,s.useState)([]),[L,E]=(0,s.useState)(!1),Z=(0,s.useRef)(null);var G=[],U=[],z=[];function W(e,t){console.log(e,"getsheetData");var a=e.map((e=>Object.keys(e).length)),s=a.indexOf(Math.max.apply(null,a));console.log(e[s]);var n=Object.keys(e[s]),o=e.map((function(e){return n.map((function(t){return e[t]?e[t]:""}))}));return o.unshift(t),o}"".concat(null===k||void 0===k||null===(t=k.teamInfo)||void 0===t||null===(a=t.createdDate)||void 0===a?void 0:a.substring(0,10)," ").concat(null===k||void 0===k||null===(n=k.assessmentRes)||void 0===n?void 0:n.assessmentType," Report ").concat(null===k||void 0===k||null===(l=k.teamInfo)||void 0===l?void 0:l.programName," ").concat(null===k||void 0===k||null===(i=k.teamInfo)||void 0===i?void 0:i.tranineeName).toUpperCase();const H=210,V=297,$=H/V,Q=e=>{if(e.width>=e.height)return{width:H,height:H/(e.width/e.height)};const t=e.width/e.height;if(t>$){const a=$*e.height/e.width,s=V*a;return{height:s,width:s*t}}return{width:V/(e.height/e.width),height:V}},K=(0,s.useCallback)((async()=>{E(!0);const e=new x.ZP,t=document.querySelector("#title01");if(!t)return;const a=(await c()(t)).toDataURL("image/png"),s=Q({width:document.querySelector("#title01").clientWidth,height:document.querySelector("#title01").clientHeight});e.addImage(a,"PNG",(H-s.width)/2,(V-s.height)/2,s.width,s.height,"","FAST"),e.addPage();for(var n=0;n<=N.length;n++){const t=document.querySelector("#charts".concat(n));if(!t)return;const a=(await c()(t)).toDataURL("image/png"),s=Q({width:document.querySelector("#charts".concat(n)).clientWidth,height:document.querySelector("#charts".concat(n)).clientHeight});if(z.push({url:a,name:"chart".concat(n,".png"),type:"image/png"}),e.addImage(a,"PNG",(H-s.width)/2,(V-s.height)/2,s.width,s.height,"","FAST"),z.length<N.length&&e.addPage(),z.length==N.length){var o=document.getElementById("title01").innerText;e.save("".concat(o,".pdf")),E(!1)}}}),[]),X=async e=>{const t=document.querySelector("#charts".concat(e));if(!t)return;const a=(await c()(t)).toDataURL("image/png");var s=document.querySelector("#button".concat(e)).innerHTML;r()(a,"".concat(s,".png"),"image/png")};return console.log(G,"ne"),(0,f.jsxs)("div",{id:"report-container",className:"flex flex-col justify-center items-center py-7  ",children:[(0,f.jsxs)("h1",{id:"title01",className:"font-semibold flex w-full justify-center items-center  h-14 capitalize text-lg text-gray-700 ",children:["Chart ",null===k||void 0===k||null===(p=k.assessmentRes)||void 0===p?void 0:p.assessmentType," Report_",null===k||void 0===k||null===(m=k.teamInfo)||void 0===m?void 0:m.name]}),(0,f.jsxs)("h1",{id:"title02",className:"hidden font-semibold  w-full justify-center items-center  h-14 capitalize text-lg text-gray-700 ",children:["Overview ",null===k||void 0===k||null===(w=k.assessmentRes)||void 0===w?void 0:w.assessmentType," Report_",null===k||void 0===k||null===(j=k.teamInfo)||void 0===j?void 0:j.name]}),(0,f.jsxs)("div",{className:" flex w-full justify-between items-center px-8",children:[L?(0,f.jsx)("span",{className:"flex mt-5 w-fit items-center justify-center py-2 rounded-md px-5 text-sm  text-white font-medium",children:(0,f.jsx)(b,{})}):(0,f.jsx)("span",{className:"flex mt-5 w-fit items-center justify-center bg-sky-500 py-2 rounded-md px-5 text-sm  text-white font-medium",children:(0,f.jsx)("a",{href:"#",onClick:K,children:"Download Overview Chart.pdf"})}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("button",{type:"button",className:"flex mt-5 w-fit items-center justify-center bg-sky-500 py-2 rounded-md px-5 text-sm  text-white font-medium",onClick:()=>{(e=>{console.log(e,"iuhygfjhgvkmnb");var t,a=[],s=[],n=[],o=[],l=[],r=[],i=[],c=[],d=[],u=[],h=[],p=[],m=[],g=[],x=[],f=[],y=[],v=[],b=[],w=[];let j=e.filter((e=>e.type.toLowerCase().includes("ratings")));n=e.map(((e,N)=>{if("ratings"==e.type){t=!1;var S=e.data.reduce(((e,t)=>e+t),0),k={question:e.label,great:JSON.stringify(e.data[5]),verygood:JSON.stringify(e.data[4]),good:JSON.stringify(e.data[3]),satisfactory:JSON.stringify(e.data[2]),average:JSON.stringify(e.data[1]),poor:JSON.stringify(e.data[0]),totalScore:S,averageScore:((5*e.data[5]+4*e.data[4]+3*e.data[3]+2*e.data[2]+1*e.data[1]+0*e.data[0])/S).toFixed(2)};console.log(k,"dataobject");var C={question:e.label,great:"".concat(JSON.stringify(Math.trunc(100*e.data[5]/S)),"%"),verygood:"".concat(JSON.stringify(Math.trunc(100*e.data[4]/S)),"%"),good:"".concat(JSON.stringify(Math.trunc(100*e.data[3]/S)),"%"),satisfactory:"".concat(JSON.stringify(Math.trunc(100*e.data[2]/S)),"%"),average:"".concat(JSON.stringify(Math.trunc(100*e.data[1]/S)),"%"),poor:"".concat(JSON.stringify(Math.trunc(100*e.data[0]/S)),"%")};console.log(C,"percentobject");var D={question:e.label,great:Math.trunc(100*e.data[5]/S),verygood:Math.trunc(100*e.data[4]/S),good:Math.trunc(100*e.data[3]/S),satisfactory:Math.trunc(100*e.data[2]/S),average:Math.trunc(100*e.data[1]/S),poor:Math.trunc(100*e.data[0]/S)};console.log(D,"perc");var R,O,F,T,M,P,I,A=[];if(i.push(D),console.log("ip2",i,0==N),n.push(k),s.push(C),console.log(n,"b-data",j),o.push(k),j.length==n.length)console.log("countRatings.length + 4 == b.length",j.length+4==n.length),o.map((e=>(g.push(parseFloat(e.averageScore)),x.push(parseFloat(e.poor)),f.push(parseFloat(e.average)),y.push(parseFloat(e.satisfactory)),v.push(parseFloat(e.good)),b.push(parseFloat(e.verygood)),w.push(parseFloat(e.great)),e))),I=(R=x.reduce(((e,t)=>e+t),0))+(O=f.reduce(((e,t)=>e+t),0))+(F=y.reduce(((e,t)=>e+t),0))+(T=v.reduce(((e,t)=>e+t),0))+(M=b.reduce(((e,t)=>e+t),0))+(P=w.reduce(((e,t)=>e+t),0)),A.push({question:"Total",great:JSON.stringify(P),verygood:JSON.stringify(M),good:JSON.stringify(T),satisfactory:JSON.stringify(F),average:JSON.stringify(O),poor:JSON.stringify(R)},{question:"Total Percentages",great:"".concat((100*P/I).toFixed(2),"%"),verygood:"".concat((100*M/I).toFixed(2),"%"),good:"".concat((100*T/I).toFixed(2),"%"),satisfactory:"".concat((100*F/I).toFixed(2),"%"),average:"".concat((100*O/I).toFixed(2),"%"),poor:"".concat((100*R/I).toFixed(2),"%")},{question:"",great:"",verygood:"",good:"",satisfactory:"",average:"",poor:""},{question:"Parameters",great:"Excellent",verygood:"Very Good",good:"Good",satisfactory:"Satisfactory",average:"Average",poor:"Poor"}),console.log("ip",i),i.map((e=>(c.push(e.poor),d.push(e.average),u.push(e.satisfactory),h.push(e.good),p.push(e.verygood),m.push(e.great),l.push(e.question),e))),r=[{label:"Poor",backgroundColor:"red",borderColor:"red",borderWidth:1,data:c,barThickness:9},{label:"Average",backgroundColor:"#ede500",borderColor:"#ede500",borderWidth:1,data:d,barThickness:9},{label:"Satisfactory",backgroundColor:"orange",borderColor:"orange",borderWidth:1,data:u,barThickness:9},{label:"Good",backgroundColor:"green",borderColor:"green",borderWidth:1,data:h,barThickness:9},{label:"Very Good",backgroundColor:"#4a86ff",borderColor:"#4a86ff",borderWidth:1,data:p,barThickness:9},{label:"Excellent",backgroundColor:"darkblue",borderColor:"darkblue",borderWidth:1,data:m,barThickness:9}],a=n.concat(A,s)}else{t=!0,S=e.data.reduce(((e,t)=>e+t),0);var q=1;k=e.data.reduce(((e,t)=>(e["opt".concat(q++)]=JSON.stringify(t),e)),{}),k={question:e.label,totalScore:S,averageScore:S/e.data.length,...k},a.push(k)}})),console.log(q,r,g,t,a,"headLabel, dataset,avrarr, collector, a.length"),J(l),A(r),_(g),T(t),D(a)})(G),O(!R),P(!0)},children:"Generate Overview Report2"}),R?(0,f.jsx)("div",{className:" absolute  -mt-4 top-0 left-0  z-50  w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,f.jsx)("div",{className:" space-y-1",role:"none",children:F?(0,f.jsxs)("button",{onClick:()=>async function(){var e=W(C,["Questions","Total Score","Average Score","Option 1","Option 2","Option 3","Option 4","Option 5"]),t=g.P6.aoa_to_sheet(e),a=g.P6.book_new();g.P6.book_append_sheet(a,t,"Sheet1");var s=document.getElementById("title02").innerText;g.NC(a,"".concat(s,".xlsx"))}(),className:"text-gray-700 rounded-t-md   flex  w-full px-4 py-2 text-sm hover:bg-blue-500 hover:text-white",children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," Download"]}):(0,f.jsxs)("button",{onClick:()=>async function(){var e=W(C,["Parameters","Excellent","Very Good","Good","Satisfactory","Average","Poor","Total Score","Average Score"]),t=g.P6.aoa_to_sheet(e),a=g.P6.book_new();g.P6.book_append_sheet(a,t,"Sheet1");var s=document.getElementById("title02").innerText;g.NC(a,"".concat(s,".xlsx"))}(),className:"text-gray-700 rounded-t-md   flex  w-full px-4 py-2 text-sm hover:bg-blue-500 hover:text-white",children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," Download"]})})}):null]})]}),M?(0,f.jsxs)("div",{className:"flex flex-col ",children:[(0,f.jsx)(y,{headLabel:q,bars:I,averages:B}),(0,f.jsx)(v,{headLabel:q,bars:I,averages:B})]}):null,N.map(((e,t)=>{if("response"!==e.type){const r=e.options,i=[...e.data.reduce(((e,t)=>(e.has(t)||e.set(t,{option:t,count:0}),e.get(t).count++,e)),new Map).values()];let c=[...i];for(var a=0;a<=(null===r||void 0===r?void 0:r.length);a++){-1==i.map((e=>e.option)).indexOf(a)&&c.push({option:a,count:0})}var s=c.sort((function(e,t){return e.option-t.option})),n=[],l=s.map((e=>(n.push(e.count),e.count)));G.push({label:e.label,data:n,options:e.options,type:e.type}),U.push({label:e.label,data:n});const u={labels:r,datasets:[{label:"Participants Responses (".concat(e.data.length,")"),data:l,backgroundColor:"rgb(0,191,255,0.5)"}]},p={responsive:!0,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"".concat(e.label)},datalabels:{formatter:(e,t)=>{let a,s=t.chart.data.datasets;if(s.indexOf(t.dataset)===s.length-1){let t=s[0].data.reduce(((e,t)=>e+t),0);return a=Math.round(e/t*100)+"%",a}return a},color:"darkgreen"}},scales:{y:{suggestedMin:0,suggestedMax:e.data.length+2}}};return(0,f.jsxs)("div",{className:"w-1/2 my-2 py-4 px-2",children:[(0,f.jsx)(o.$Q,{id:"charts".concat(t),ref:Z,options:p,data:u,plugins:[h.Z]}),(0,f.jsx)("span",{className:"text-md font-normal text-white px-3 py-1 rounded-md my-3 bg-sky-500",children:(0,f.jsxs)("button",{id:"button".concat(t),type:"button",onClick:()=>X(t),children:["Download Chart #",t+1]})})]},(0,d.Z)())}return(0,f.jsxs)("div",{className:"flex flex-col  w-[557.333px]",children:[(0,f.jsxs)("div",{id:"charts".concat(t),className:"flex flex-col w-full justify-center items-center ",children:[(0,f.jsx)("p",{className:"text-sm space-y-1  text-gray-600 font-medium my-3",children:e.label}),(0,f.jsx)("div",{className:"grid grid-cols-1 w-full gap-2 my-2",children:e.data.map((e=>(0,f.jsx)("span",{className:"w-full ",children:(0,f.jsx)("p",{className:"text-sm p-3 rounded-md text-gray-700 font-medium  bg-gray-200",children:e})},(0,d.Z)())))})]}),(0,f.jsx)("span",{className:"text-md justify-start w-fit font-normal text-white px-3 py-1 rounded-md my-3 bg-sky-500",children:(0,f.jsxs)("button",{id:"button".concat(t),type:"button",onClick:()=>X(t),children:["Download Response #",t+1]})})]},(0,d.Z)())}))]})};p.kL.register(p.uw,p.f$,p.ZL,p.Dx,p.u,p.De);const j=function(e){var t,a,n,l,i,p,w,j,N;let{chartData:S,excelData:k,batchData:C}=e;console.log(C,"batchData");const[D,R]=(0,s.useState)([]),[O,F]=(0,s.useState)(!1),[T,M]=(0,s.useState)(!1),[P,I]=(0,s.useState)(!1),[A,q]=(0,s.useState)([]),[J,B]=(0,s.useState)([]),[_,L]=(0,s.useState)([]),[E,Z]=(0,s.useState)(!1),[G,U]=(0,s.useState)(!1);(0,s.useEffect)((()=>{"feedback"==k?(Z(!1),M(!1)):(Z(!0),M(!0))}),[]);const z=(0,s.useRef)(null);var W=[],H=[],V=[];function $(e,t){var a=e.map((e=>Object.keys(e).length)),s=a.indexOf(Math.max.apply(null,a)),n=Object.keys(e[s]),o=e.map((function(e){return n.map((function(t){return e[t]?e[t]:""}))}));return o.unshift(t),o}"".concat(null===C||void 0===C||null===(t=C.teamInfo)||void 0===t||null===(a=t.createdDate)||void 0===a?void 0:a.substring(0,10)," ").concat(null===C||void 0===C||null===(n=C.assessmentRes)||void 0===n?void 0:n.assessmentType," Report ").concat(null===C||void 0===C||null===(l=C.teamInfo)||void 0===l?void 0:l.programName," ").concat(null===C||void 0===C||null===(i=C.teamInfo)||void 0===i?void 0:i.tranineeName).toUpperCase();const Q=210,K=297,X=Q/K,Y=e=>{if(e.width>=e.height)return{width:Q,height:Q/(e.width/e.height)};const t=e.width/e.height;if(t>X){const a=X*e.height/e.width,s=K*a;return{height:s,width:s*t}}return{width:K/(e.height/e.width),height:K}},ee=(0,s.useCallback)((async()=>{U(!0);const e=new x.ZP,t=document.querySelector("#title01");if(!t)return;const a=(await c()(t)).toDataURL("image/png"),s=Y({width:document.querySelector("#title01").clientWidth,height:document.querySelector("#title01").clientHeight});e.addImage(a,"PNG",(Q-s.width)/2,(K-s.height)/2,s.width,s.height,"","FAST"),e.addPage();for(var n=0;n<=S.length;n++){const t=document.querySelector("#charts".concat(n));if(!t)return;const a=(await c()(t)).toDataURL("image/png"),s=Y({width:document.querySelector("#charts".concat(n)).clientWidth,height:document.querySelector("#charts".concat(n)).clientHeight});if(V.push({url:a,name:"chart".concat(n,".png"),type:"image/png",width:t.clientWidth,height:t.clientHeight}),e.addImage(a,"PNG",(Q-s.width)/2,(K-s.height)/2,s.width,s.height,"","FAST"),V.length<S.length&&e.addPage(),V.length==S.length){var o=document.getElementById("title01").innerText;e.save("".concat(o,".pdf")),U(!1)}}}),[]),te=async e=>{const t=document.querySelector("#charts".concat(e));if(!t)return;const a=(await c()(t)).toDataURL("image/png");r()(a,"download.png","image/png")};return(0,f.jsxs)("div",{id:"report-container",className:"flex flex-col justify-center items-center py-7  ",children:[(0,f.jsxs)("h1",{id:"title01",className:"font-semibold flex w-full justify-center items-center  h-14 capitalize text-lg text-gray-700 ",children:["Chart_",null===C||void 0===C||null===(p=C.assessmentRes)||void 0===p?void 0:p.assessmentType," Report_",null===C||void 0===C||null===(w=C.teamInfo)||void 0===w?void 0:w.teamName]}),(0,f.jsxs)("h1",{id:"title02",className:"hidden font-semibold  w-full justify-center items-center  h-14 capitalize text-lg text-gray-700 ",children:["Overview",null===C||void 0===C||null===(j=C.assessmentRes)||void 0===j?void 0:j.assessmentType," Report _",null===C||void 0===C||null===(N=C.teamInfo)||void 0===N?void 0:N.teamName]}),(0,f.jsxs)("div",{className:" flex w-full justify-between items-center px-8",children:[G?(0,f.jsx)("span",{className:"flex mt-5 w-fit items-center justify-center py-2 rounded-md px-5 text-sm  text-white font-medium",children:(0,f.jsx)(b,{})}):(0,f.jsx)("span",{className:"flex mt-5 w-fit items-center justify-center bg-sky-500 py-2 rounded-md px-5 text-sm  text-white font-medium",children:(0,f.jsx)("a",{href:"#",onClick:ee,children:"Download Overview Chart.pdf"})}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("button",{type:"button",className:"flex mt-5 w-fit items-center justify-center bg-sky-500 py-2 rounded-md px-5 text-sm  text-white font-medium",onClick:()=>{(e=>{console.log(e,"ne");var t=[],a=[],s=[],n=[],o=[],l=[];let r=[],i=[],c=[],d=[],u=[],h=[],p=[],m=[],g=[],x=[],f=[],y=[],v=[],b=[],w=[],j=[],N=[],S=[],k=[],C=[];var D=[];let O=e.filter((e=>e.type.toLowerCase().includes("ratings")));s=e.map(((e,R)=>{if("ratings"==e.type){var F=e.data.reduce(((e,t)=>e+t),0),T={question:e.label,data1:e.data[0]?JSON.stringify(e.data[0]):null,data2:e.data[1]?JSON.stringify(e.data[1]):null,data3:e.data[2]?JSON.stringify(e.data[2]):null,data4:e.data[3]?JSON.stringify(e.data[3]):null,data5:e.data[4]?JSON.stringify(e.data[4]):null,data6:e.data[5]?JSON.stringify(e.data[5]):null,data7:e.data[6]?JSON.stringify(e.data[6]):null,data8:e.data[7]?JSON.stringify(e.data[7]):null,data9:e.data[8]?JSON.stringify(e.data[8]):null,data10:e.data[9]?JSON.stringify(e.data[9]):null,totalScore:F,averageScore:((10*(e.data[9]||0)+9*(e.data[8]||0)+8*(e.data[7]||0)+7*(e.data[6]||0)+6*(e.data[5]||0)+5*(e.data[4]||0)+4*(e.data[3]||0)+3*(e.data[2]||0)+2*(e.data[1]||0)+1*(e.data[0]||0))/F).toFixed(2)};console.log(T);var M={question:e.label,data1:e.data[0]?Math.trunc(100*e.data[0]/F)+"%":null,data2:e.data[1]?Math.trunc(100*e.data[1]/F)+"%":null,data3:e.data[2]?Math.trunc(100*e.data[2]/F)+"%":null,data4:e.data[3]?Math.trunc(100*e.data[3]/F)+"%":null,data5:e.data[4]?Math.trunc(100*e.data[4]/F)+"%":null,data6:e.data[5]?Math.trunc(100*e.data[5]/F)+"%":null,data7:e.data[6]?Math.trunc(100*e.data[6]/F)+"%":null,data8:e.data[7]?Math.trunc(100*e.data[7]/F)+"%":null,data9:e.data[8]?Math.trunc(100*e.data[8]/F)+"%":null,data10:e.data[9]?Math.trunc(100*e.data[9]/F)+"%":null},P={question:e.label,data1:e.data[0]?Math.trunc(100*e.data[0]/F):null,data2:e.data[1]?Math.trunc(100*e.data[1]/F):null,data3:e.data[2]?Math.trunc(100*e.data[2]/F):null,data4:e.data[3]?Math.trunc(100*e.data[3]/F):null,data5:e.data[4]?Math.trunc(100*e.data[4]/F):null,data6:e.data[5]?Math.trunc(100*e.data[5]/F):null,data7:e.data[6]?Math.trunc(100*e.data[6]/F):null,data8:e.data[7]?Math.trunc(100*e.data[7]/F):null,data9:e.data[8]?Math.trunc(100*e.data[8]/F):null,data10:e.data[9]?Math.trunc(100*e.data[9]/F):null},I=[];if(l.push(P),s.push(T),a.push(M),O.length==s.length){var A,q,J,B,_,L,E,Z,G,U,z;s.map((e=>(D.push(parseFloat(e.averageScore)),f.push(parseFloat(e.data1)),y.push(parseFloat(e.data2)),v.push(parseFloat(e.data3)),b.push(parseFloat(e.data4)),w.push(parseFloat(e.data5)),j.push(parseFloat(e.data6)),N.push(parseFloat(e.data7)),S.push(parseFloat(e.data8)),k.push(parseFloat(e.data9)),C.push(parseFloat(e.data10)),e))),z=(A=f.reduce(((e,t)=>e+t),0))+(q=y.reduce(((e,t)=>e+t),0))+(J=v.reduce(((e,t)=>e+t),0))+(B=b.reduce(((e,t)=>e+t),0))+(_=w.reduce(((e,t)=>e+t),0))+(L=j.reduce(((e,t)=>e+t),0))+(E=N.reduce(((e,t)=>e+t),0))+(Z=S.reduce(((e,t)=>e+t),0))+(G=k.reduce(((e,t)=>e+t),0))+(U=C.reduce(((e,t)=>e+t),0)),I.push({question:"Total",data1:JSON.stringify(A),data2:JSON.stringify(q),data3:JSON.stringify(J),data4:JSON.stringify(B),data5:JSON.stringify(_),data6:JSON.stringify(L),data7:JSON.stringify(E),data8:JSON.stringify(Z),data9:JSON.stringify(G),data10:JSON.stringify(U)},{question:"Total Percentages",data1:"".concat((100*A/z).toFixed(2),"%"),data2:"".concat((100*q/z).toFixed(2),"%"),data3:"".concat((100*J/z).toFixed(2),"%"),data4:"".concat((100*B/z).toFixed(2),"%"),data5:"".concat((100*_/z).toFixed(2),"%"),data6:"".concat((100*L/z).toFixed(2),"%"),data7:"".concat((100*E/z).toFixed(2),"%"),data8:"".concat((100*Z/z).toFixed(2),"%"),data9:"".concat((100*G/z).toFixed(2),"%"),data10:"".concat((100*U/z).toFixed(2),"%")},{question:"",poor:"",average:"",satisfactory:"",good:"",verygood:"",great:""},{question:"Parameters",poor:"Poor",average:"Average",satisfactory:"Satisfactory",good:"Good",verygood:"Very Good",great:"Excellent"}),l.map((e=>(r.push(e.data1),i.push(e.data2),c.push(e.data3),d.push(e.data4),u.push(e.data5),h.push(e.data6),p.push(e.data7),m.push(e.data8),g.push(e.data9),x.push(e.data10),n.push(e.question),e)));const V=W[0].options,$=[r,i,c,d,u,h,p,m,g,x],Q=[];function K(){let e=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#D3D3D3","#B19CD9","#FF7F50","#20B2AA","#FF6347"];return e[Math.floor(Math.random()*e.length)]}console.log("----------------dataArray--------------",$),$.forEach(((e,t)=>{Array.isArray(e)&&e.some((e=>null!==e))&&Q.push({label:V[t],backgroundColor:K(),borderColor:K(),borderWidth:1,data:e,barThickness:11})})),o=[...Q],console.log("dataset",o),t=s.concat(I,a)}}else{F=e.data.reduce(((e,t)=>e+t),0);var H=1;T=e.data.reduce(((e,t)=>(e["opt".concat(H++)]=JSON.stringify(t),e)),{}),T={question:e.label,totalScore:F,averageScore:F/e.data.length,...T},t.push(T)}})),console.log(t,"setexr"),B(n),q(o),L(D),R(t)})(W),F(!O),I(!0)},children:"Generate Overview Report"}),O?(0,f.jsx)("div",{className:" absolute  -mt-4 top-0 left-0  z-50  w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,f.jsx)("div",{className:" space-y-1",role:"none",children:T?(0,f.jsxs)("button",{onClick:()=>async function(){}(),className:"text-gray-700 rounded-t-md   flex  w-full px-4 py-2 text-sm hover:bg-blue-500 hover:text-white",children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," Download"]}):(0,f.jsxs)("button",{onClick:()=>async function(){var e=D;console.log(e,"newData");var t=e,a=W[0].options;const s=g.P6.aoa_to_sheet([a,...$(t,a)]),n=g.P6.book_new();g.P6.book_append_sheet(n,s,"Sheet 1");const o=g.cW(n,{bookType:"xlsx",bookSST:!1,type:"binary"}),l=document.getElementById("title02").innerText;(0,m.saveAs)(new Blob([function(e){const t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let s=0;s!==e.length;++s)a[s]=255&e.charCodeAt(s);return t}(o)],{type:"application/octet-stream"}),"".concat(l,".xlsx"))}(),className:"text-gray-700 rounded-t-md   flex  w-full px-4 py-2 text-sm hover:bg-blue-500 hover:text-white",children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," Download"]})})}):null]})]}),E?null:(0,f.jsx)(f.Fragment,{children:P?(0,f.jsxs)("div",{className:"flex flex-col ",children:[(0,f.jsx)(y,{headLabel:J,bars:A,averages:_}),(0,f.jsx)(v,{headLabel:J,bars:A,averages:_})]}):null}),S.map(((e,t)=>{if("ratings"==e.type){const r=e.options,i=[...e.data.reduce(((e,t)=>(e.has(t)||e.set(t,{option:t,count:0}),e.get(t).count++,e)),new Map).values()];let c=[...i];for(var a=1;a<=(null===r||void 0===r?void 0:r.length);a++){-1==i.map((e=>e.option)).indexOf(a)&&c.push({option:a,count:0})}var s=c.sort((function(e,t){return e.option-t.option})),n=[],l=s.map((e=>(n.push(e.count),e.count)));W.push({label:e.label,data:n,options:e.options,type:e.type}),H.push({label:e.label,data:n});const u={labels:r,datasets:[{label:"Participants Responses (".concat(e.data.length,")"),data:l,backgroundColor:"rgb(0,191,255,0.5)"}]},p={responsive:!0,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"".concat(e.label)},datalabels:{formatter:(e,t)=>{let a,s=t.chart.data.datasets;if(s.indexOf(t.dataset)===s.length-1){let t=s[0].data.reduce(((e,t)=>e+t),0);return a=Math.round(e/t*100)+"%",a}return a},color:"darkgreen"}},scales:{y:{suggestedMin:0,suggestedMax:e.data.length+2}}};return(0,f.jsxs)("div",{className:"w-1/2 my-2 py-4 px-2",children:[(0,f.jsx)(o.$Q,{id:"charts".concat(t),ref:z,options:p,data:u,plugins:[h.Z]}),(0,f.jsx)("span",{className:"text-md font-normal text-white px-3 py-1 rounded-md my-3 bg-sky-500",children:(0,f.jsxs)("button",{type:"button",onClick:()=>te(t),children:["Download Chart #",t+1]})})]},(0,d.Z)())}if("response"==e.type)return(0,f.jsxs)("div",{className:"flex flex-col  w-[557.333px]",children:[(0,f.jsxs)("div",{id:"charts".concat(t),className:"flex flex-col w-full justify-center items-center ",children:[(0,f.jsx)("p",{className:"text-sm space-y-1  text-gray-600 font-medium my-3",children:e.label}),(0,f.jsx)("div",{className:"grid grid-cols-1 w-full gap-2 my-2",children:e.data.map((e=>(0,f.jsx)("span",{className:"w-full ",children:(0,f.jsx)("p",{className:"text-sm p-3 rounded-md text-gray-700 font-medium  bg-gray-200",children:e})},(0,d.Z)())))})]}),(0,f.jsx)("span",{className:"text-md justify-start w-fit font-normal text-white px-3 py-1 rounded-md my-3 bg-sky-500",children:(0,f.jsxs)("button",{type:"button",onClick:()=>te(t),children:["Download Response #",t+1]})})]},(0,d.Z)());{const r=e.options,i=[...e.data.reduce(((e,t)=>(e.has(t)||e.set(t,{option:t,count:0}),e.get(t).count++,e)),new Map).values()];let c=[...i];for(a=1;a<=(null===r||void 0===r?void 0:r.length);a++){-1==i.map((e=>e.option)).indexOf(a)&&c.push({option:a,count:0})}s=c.sort((function(e,t){return e.option-t.option})),n=[],l=s.map((e=>(n.push(e.count),e.count)));W.push({label:e.label,data:n,options:e.options,type:e.type}),H.push({label:e.label,data:n});const u={labels:r,datasets:[{label:"Participants Responses (".concat(e.data.length,")"),data:l,backgroundColor:"rgb(0,191,255,0.5)"}]},p={responsive:!0,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"".concat(e.label)},datalabels:{formatter:(e,t)=>{let a,s=t.chart.data.datasets;if(s.indexOf(t.dataset)===s.length-1){let t=s[0].data.reduce(((e,t)=>e+t),0);return a=Math.round(e/t*100)+"%",a}return a},color:"darkgreen"}},scales:{y:{suggestedMin:0,suggestedMax:e.data.length+2}}};return(0,f.jsxs)("div",{className:"w-1/2 my-2 py-4 px-2",children:[(0,f.jsx)(o.$Q,{id:"charts".concat(t),ref:z,options:p,data:u,plugins:[h.Z]}),(0,f.jsx)("span",{className:"text-md font-normal text-white px-3 py-1 rounded-md my-3 bg-sky-500",children:(0,f.jsxs)("button",{type:"button",onClick:()=>te(t),children:["Download Chart #",t+1]})})]},(0,d.Z)())}}))]})};var N=a(18622);const S=function(e){let{chartData:t,excelData:a,batchData:n}=e;const[o,l]=(0,s.useState)(null);return console.log(null===o||void 0===o?void 0:o.data,"selectedReport?.data",a,"=========================",n,t),(0,f.jsxs)("div",{className:"flex flex-col  w-full mt-16",children:[(0,f.jsxs)("h1",{className:"font-semibold text-lg text-gray-700 mb-2",children:["Report Type: ",(null===o||void 0===o?void 0:o.label)||"No Report Type Selected"]}),null!==o&&void 0!==o&&o.data?"Dynamic":"wagons",(0,f.jsx)(N.ZP,{options:[{data:!1,label:"Wagons Report"},{data:!0,label:"Dynamic Report"}],onChange:e=>{l(e)},styles:{container:e=>({...e,flex:1}),control:e=>({...e,border:"1px solid rgb(209 213 219)",boxShadow:"none","&:hover":{border:"1px solid rgb(17 24 39)"}}),input:e=>({...e,color:"rgb(75 85 99)",paddingLeft:"6px",paddingBottom:"3px",fontSize:"1rem",lineHeight:"1.25rem"}),placeholder:e=>({...e,color:"#a1a9bb",paddingLeft:"6px",fontSize:"0.870rem",lineHeight:"1.25rem"})},getOptionValue:e=>e.data,placeholder:"Select Report"}),null==o?(0,f.jsxs)("h1",{className:"font-semibold text-lg text-gray-700 ",children:["Please select a Report Type to generate Report"," "]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("h1",{className:"font-semibold text-lg text-gray-700 ",children:["Please select a Report Type to generate Report"," "]}),o.data?(0,f.jsx)(j,{chartData:t,excelData:a,batchData:n}):(0,f.jsx)(w,{chartData:t,excelData:a,batchData:n})]})]})};var k=a(29655),C=a(58241);const D=function(e){var t,a,n,o,l,r,i;let{list:c,setBatchPop:d,setChartData:h,setExcelData:p,batchData:x,setReportPop:y,setBatchData:v}=e;const[b,w]=(0,s.useState)(!1),[j,N]=(0,s.useState)([]),{userData:S}=(0,C.aC)(),[D,R]=(0,s.useState)([]),[O,F]=(0,s.useState)([]),[T,M]=(0,s.useState)([]),[P,I]=(0,s.useState)([]),[A,q]=(0,s.useState)([]),[J,B]=(0,s.useState)([]),[_,L]=(0,s.useState)(!1);console.log(P,"s");var E=[],Z=[],G=[],U=[],z=[];const W=e=>{var t,a,s;console.log(e,"reportData");null===e||void 0===e||e.reportData.map(((a,n)=>{var o,l;t={timestamp:a.createdDate.substring(0,10),participantName:a.fullName,employeeCode:a.employeeId,email:a.email,score:"".concat(a.obtainMarks," / ").concat(a.totalMarks),region:a.branchName,result:a.result,avgscore:""},s={program:null===e||void 0===e||null===(o=e.teamInfo)||void 0===o?void 0:o.programName,facilitator:null===e||void 0===e||null===(l=e.teamInfo)||void 0===l?void 0:l.tranineeName,timestamp:a.createdDate.substring(0,10),participantName:a.fullName,employeeCode:a.employeeId,email:a.email,contact:null===a||void 0===a?void 0:a.contactNo,score:a.obtainMarks,region:a.branchName,result:a.result};JSON.parse(a.answerResponseBunch).map(((e,t)=>{var a;console.log(e,"OP"),a="multiopt"==e.questionType?(null===e||void 0===e?void 0:e.selectedAnswer.join())||(null===e||void 0===e?void 0:e.selectedOption.join()):(null===e||void 0===e?void 0:e.selectedAnswer)||(null===e||void 0===e?void 0:e.selectedOption);var n={};return n={...n,["question".concat(t+1)]:a},s={...s,...n},e}));if(E.push(parseInt(a.obtainMarks)),U.push(JSON.parse(a.answerResponseBunch)),Z.push(t),Z.length==e.reportData.length){var r=E.reduce(((e,t)=>e+t),0)/E.length;Z.push({timestamp:"",participantName:"",employeeCode:"",email:"",score:"",region:"",result:"",avgscore:"".concat(Math.trunc(r)," / ").concat(a.totalMarks)})}return G.push(s),a}));R(Z),F(G);U.map((e=>e.map((e=>(a={label:e.question,data:e.selectedOption,type:e.questionType,options:e.answers},z.push(a))))));H(z)},H=e=>{console.log("==============datat======",e);const t=e.reduce(((e,t)=>{const a=e.find((e=>e.label===t.label));if(a){const s=a.data.push(t.data);t.label,t.type,t.options;return e}{const a={label:t.label,data:[t.data],type:t.type,options:t.options};return e.concat([a])}}),[]);var a=[],s=[];console.log(t,"shh");t.map((e=>(s.push(e.label),e)));console.log(a,"pouu");for(var n=[],o=0;o<=a.length;o++){var l;l={...Z[o],...a[o]},n.push(l)}s=["Program Title","Facilitator","Date","Employee Name","EmployeeId","Email","Contact","Score","Region","Result",...s],q(s),console.log(t,"ouigvvhf"),console.log("===================================filet ararra",t),N(t),w(!0)};function V(e,t){var a=Object.keys(e[0]),s=e.map((function(e){return a.map((function(t){return e[t]?e[t]:""}))}));return s.unshift(t),s}return"".concat(null===P||void 0===P||null===(t=P.teamInfo)||void 0===t||null===(a=t.createdDate)||void 0===a?void 0:a.substring(0,10)," ").concat(null===P||void 0===P||null===(n=P.assessmentRes)||void 0===n?void 0:n.assessmentType," Report ").concat(null===P||void 0===P||null===(o=P.teamInfo)||void 0===o?void 0:o.programName," ").concat(null===P||void 0===P||null===(l=P.teamInfo)||void 0===l?void 0:l.tranineeName).toUpperCase(),(0,f.jsx)(f.Fragment,{children:b?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{children:[(0,f.jsxs)("p",{id:"basic".concat(c.assessmentId),className:"hidden capitalize",children:["Basic"," ",document.getElementById("assesType".concat(c.assessmentId)).innerText,"_",null===P||void 0===P||null===(r=P.teamInfo)||void 0===r?void 0:r.teamName]}),(0,f.jsxs)("p",{id:"advance".concat(c.assessmentId),className:"hidden capitalize",children:[document.getElementById("assesType".concat(c.assessmentId)).innerText,"_ User Response Report_",null===P||void 0===P||null===(i=P.teamInfo)||void 0===i?void 0:i.teamName]}),(0,f.jsxs)("button",{type:"button",className:"flex w-fit items-center justify-center bg-sky-500 py-2 rounded-md px-5 text-sm  text-white font-medium",onClick:()=>L(!_),children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," Excel Report"]}),_?(0,f.jsx)("div",{className:" absolute  -mt-24  left-16  w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,f.jsxs)("div",{className:" space-y-1",role:"none",children:[(0,f.jsxs)("button",{onClick:()=>async function(){var e=D;console.log(e,"uh");let t=["Time Stamps","Employee Name","EmployeeId","Email","Score","Branch Name","Result","Average Score"];const a=V(e,t),s=g.P6.aoa_to_sheet([t,...a]),n=g.P6.book_new();g.P6.book_append_sheet(n,s,"Sheet 1");const o=g.cW(n,{bookType:"xlsx",bookSST:!1,type:"binary"}),l=document.getElementById("basic".concat(c.assessmentId)).innerText;(0,m.saveAs)(new Blob([function(e){const t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let s=0;s!==e.length;++s)a[s]=255&e.charCodeAt(s);return t}(o)],{type:"application/octet-stream"}),"".concat(l,".xlsx")),L(!_)}(),className:"text-gray-700 rounded-t-md   flex  w-full px-4 py-2 text-sm hover:bg-blue-500 hover:text-white",children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," Basic Report"]}),(0,f.jsxs)("button",{onClick:()=>async function(){var e=O.map((e=>(Object.keys(e).forEach((t=>{t.match("question")&&("Excellent"===e[t]?e={...e,[t]:"5"}:"Very Good"===e[t]?e={...e,[t]:"4"}:"Good"===e[t]?e={...e,[t]:"3"}:"Satisfactory"===e[t]?e={...e,[t]:"2"}:"Average"===e[t]?e={...e,[t]:"1"}:"Poor"===e[t]&&(e={...e,[t]:"0"}))})),e)));let t=A;console.log(e,t,"popopop");const a=g.P6.aoa_to_sheet([t,...V(e,t)]),s=g.P6.book_new();g.P6.book_append_sheet(s,a,"Sheet 1");const n=g.cW(s,{bookType:"xlsx",bookSST:!1,type:"binary"}),o=document.getElementById("advance".concat(c.assessmentId)).innerText;(0,m.saveAs)(new Blob([function(e){const t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let s=0;s!==e.length;++s)a[s]=255&e.charCodeAt(s);return t}(n)],{type:"application/octet-stream"}),"".concat(o,".xlsx")),L(!_)}(),className:"text-gray-700 rounded-b-md  flex  w-full px-4 py-2 text-sm hover:bg-blue-500 hover:text-white",children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," User Response Report"]})]})}):null]}),(0,f.jsx)("div",{children:(0,f.jsxs)("button",{onClick:()=>{var e;h(j),p(null===P||void 0===P||null===(e=P.assessmentRes)||void 0===e?void 0:e.assessmentType),y(!0),L(!1),v(P)},type:"button",className:"flex w-fit items-center justify-center bg-sky-500 py-2 rounded-md px-5 text-sm  text-white font-medium",children:[(0,f.jsx)(u.RFS,{className:"text-xl mr-1"})," Overview Report"]})})]}):(0,f.jsxs)("button",{type:"button",onClick:e=>{(async(e,t)=>{const a={assessmentId:t,batchId:e};var s;let n=new URLSearchParams(Object.entries(a)).toString();s=await fetch("".concat("http://localhost:8000","/api/userBatchAnswers/getReport?access_token=").concat(null===S||void 0===S?void 0:S.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:n});const o=await s.json();if(s.ok)if(404===o.code)console.error(o.msg);else if(null!==o&&void 0!==o&&o.value){I(o.data),console.log(o.data,"ub");var l=o.data;W(l)}else k.Am.warn("No reports available!! Try again later");else console.log("er")})(c.batchId,c.assessmentId)},className:" text-gray-600  flex items-center justify-center space-x-1 text-2xl hover:underline",children:[(0,f.jsx)(u.RFS,{}),(0,f.jsx)("p",{className:"text-sm mb-0.5",children:"Generate Report"})]})})};const R=function(e){let{next:t,previous:a,pgindex:n,page:o,totalCount:l,setLimit:r,setPage:i,setSearch:c,setReportPop:u,setBatchPop:h,setChartData:p,assessmentsList:m,id:g,setExcelData:x,batchData:y,setBatchData:v}=e;const[b,w]=(0,s.useState)("Fetching...");return(0,s.useEffect)((()=>{const e=setTimeout((()=>{w("No Data Found...")}),1e4);return()=>clearTimeout(e)}),[]),(0,f.jsxs)("div",{className:"mt-2 ",children:[(0,f.jsxs)("div",{className:"flex flex-row my-2 w-full justify-between items-center",children:[(0,f.jsx)("div",{className:"px-2  flex w-full justify-between   ",children:(0,f.jsxs)("h5",{className:"text-lg  font-medium leading-none text-gray-700 ",children:["Assessments Report List of Batch Id:",g]})}),(0,f.jsxs)("div",{className:"relative mt-1 ",children:[(0,f.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none py-2 ",children:(0,f.jsx)("svg",{className:"w-5 h-5 text-gray-500 ",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,f.jsx)("input",{type:"text",id:"table-search",className:"bg-gray-50 border py-1 outline-none border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-sky-500 focus:border-sky-500 block w-80 pl-10 p-2.5  ",placeholder:"Search by Assessments",onChange:e=>c(e.target.value)})]})]}),(0,f.jsx)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg mt-3",children:(0,f.jsxs)("table",{className:"w-full text-sm  text-center text-gray-500 ",children:[(0,f.jsx)("thead",{className:"text-xs text-white uppercase bg-sky-500  ",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Assessment"}),(0,f.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Type"}),(0,f.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Batch Id"}),(0,f.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Date"}),(0,f.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Client Name"}),(0,f.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Download Report"})]})}),0==(null===m||void 0===m?void 0:m.length)?(0,f.jsx)("tbody",{children:(0,f.jsxs)("tr",{className:"border-b  text-lg font-medium odd:bg-white even:bg-gray-50 ",children:[(0,f.jsx)("td",{className:"px-6 py-4"}),(0,f.jsx)("td",{className:"px-6 py-4"}),(0,f.jsx)("td",{className:"px-6 py-4",children:b}),(0,f.jsx)("td",{className:"px-6 py-4",children:" "}),(0,f.jsx)("td",{className:"px-6 py-4"})]})}):(0,f.jsx)(f.Fragment,{children:null===m||void 0===m?void 0:m.map((e=>{var t;return(0,f.jsx)("tbody",{className:"text-left",children:(0,f.jsxs)("tr",{className:"border-b   odd:bg-white even:bg-gray-50 odd: even:",children:[(0,f.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900  whitespace-nowrap",children:e.name}),(0,f.jsxs)("td",{id:"assesType".concat(e.assessmentId),className:"px-6 py-4",children:["pre"==(null===e||void 0===e?void 0:e.assessmentType)?"Pre-Assessment Report":null,"post"==(null===e||void 0===e?void 0:e.assessmentType)?"Post-Assessment Report":null,"feedback"==(null===e||void 0===e?void 0:e.assessmentType)?"Feedback Report":null]}),(0,f.jsx)("td",{className:"px-6 py-4",children:e.batchId}),(0,f.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e||null===(t=e.createdDate)||void 0===t?void 0:t.substring(0,10)}),(0,f.jsx)("td",{className:"px-6 py-4",children:e.clientName}),(0,f.jsx)("td",{className:"relative flex flex-row px-6 text-center py-4 justify-center items-center space-x-6  mt-2",children:(0,f.jsx)(D,{list:e,setBatchPop:h,setReportPop:u,setChartData:p,setExcelData:x,batchData:y,setBatchData:v})})]})},(0,d.Z)())}))})]})})]})};var O=a(16871),F=a(20890),T=a(66583);const M=e=>{let{chartData:t,excelData:a,batchData:s}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(T.Z,{title:"Batch Report",children:(0,f.jsx)(F.Z,{variant:"body1",style:{marginBottom:"50px",marginTop:"-35px"},children:(0,f.jsx)(S,{chartData:t,excelData:a,batchData:s})})})})};const P=function(){const[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(!1),[l,r]=(0,s.useState)(""),[i,c]=(0,s.useState)(100),[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(0),[m,g]=(0,s.useState)(),[x,y]=(0,s.useState)([]),[v,b]=(0,s.useState)([]),[w,j]=(0,s.useState)([]),{batchId:N}=(0,O.UO)(),{userData:k}=(0,C.aC)();(0,s.useEffect)((()=>{D()}),[l,i,h]);const D=async()=>{var e=await fetch("".concat("http://localhost:8000","/api/userBatchAnswers/listOfReport/").concat(N,"?access_token=").concat(null===k||void 0===k?void 0:k.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"GET"});const a=await e.json();if(console.log(a,"ssss"),!e.ok){const t=a&&a.message||e.statusText;return Promise.reject(t)}var s;console.log(a),404===a.code?console.log(a.message):(t(a.data),g((null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.length)||0))},F=m,T=F-5;var P=[];if(void 0!==N){null===e||void 0===e||e.map((e=>(e.batchId==N&&(P=[...P,e]),e)))}return(0,f.jsxs)("div",{className:"flex flex-col w-full mt-12",children:[a?(0,f.jsx)("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center   bg-gray-800/40",children:(0,f.jsx)("div",{className:"flex w-full items-start mt-20 justify-center   h-screen",children:(0,f.jsxs)("div",{className:"relative mx-10 flex flex-col  w-full items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[(0,f.jsx)("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-4 ",children:(0,f.jsx)(n.bjh,{onClick:()=>o(!1),className:"cursor-pointer text-xl font-semibold text-black "})}),(0,f.jsx)("div",{id:"journal-scroll",className:"w-full h-[30rem] overflow-y-auto",children:(0,f.jsx)(S,{chartData:x,excelData:v,batchData:w})})]})})}):null,d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h1",{children:"test"}),(0,f.jsx)(M,{chartData:x,excelData:v,batchData:w})]}):(0,f.jsx)(R,{assessmentsList:e,next:()=>{if(m%i==0){if(!(h<T))return;p(h+1)}else{if(!(h<F))return;p(h+1)}},previous:()=>{h<=0||p(h-1)},pgindex:T,setExcelData:b,page:h,totalCount:m,setLimit:c,setPage:p,setSearch:r,id:N,batchData:w,setReportPop:u,setBatchData:j,setBatchPop:o,setChartData:y})]})}}}]);
//# sourceMappingURL=5083.2f33272b.chunk.js.map