{"version":3,"file":"static/js/4153.706e473a.chunk.js","mappings":"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","sources":["pages/training/program/AttendenceForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useLocation, useParams } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useAuth } from \"../../../context/auth\";\r\n\r\nfunction AttendenceForm() {\r\n  //   const router = useRouter();\r\n  //   const { batchId, programType } = router.query;\r\n  const location = useLocation();\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const { userData } = useAuth()\r\n  const programType = queryParams.get('programType');\r\n  const { batchId } = useParams()\r\n  const [email, setEmail] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [employee, setEmployee] = useState(null);\r\n  //   console.log(programType, \"programType\");\r\n  const handleAttenceFormSubmit = async (e) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n    if (!employee) {\r\n      toast.error(\"Employee not found\");\r\n    } else {\r\n      try {\r\n        let form = new URLSearchParams({\r\n          email: employee.email,\r\n          batchId: batchId,\r\n        }).toString();\r\n        // return console.log(form);\r\n        const response = await fetch(\r\n          `${process.env.REACT_APP_PUBLIC_URL}/api/batchAttendences/addAttendence?access_token=${userData?.accessToken}`,\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n            },\r\n\r\n            method: \"POST\",\r\n            body: form,\r\n          }\r\n        );\r\n        const data = await response.json();\r\n        if (data.status === \"failure\") {\r\n          return toast.error(data.msg);\r\n        }\r\n        toast.success(\"Attendence submitted successful.\");\r\n        e.target.reset();\r\n        setEmail(\"\");\r\n        setEmployee(null);\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n  const fetchEmployeeDetails = async (e) => {\r\n    setEmployee(null);\r\n    e.preventDefault();\r\n    try {\r\n      const params = encodeURIComponent(JSON.stringify({ email, batchId }));\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_PUBLIC_URL}/api/nominees/getByEmail?filter=${params}&access_token=${userData?.accessToken}`\r\n      );\r\n      const data = await response.json();\r\n      if (Object.keys(data.data).length) {\r\n        console.log(data, \"fetchEmployeeDetails\");\r\n        setEmployee({\r\n          email: data.data.email,\r\n          name: data.data.firstName + \" \" + data.data.lastName,\r\n        });\r\n      } else {\r\n        throw Error(\"Employee not found\");\r\n      }\r\n    } catch (error) {\r\n      toast.error(error?.message);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-center my-5\">\r\n        <div className=\"flex mb-4 sm:flex-row flex-col sm:w-full w-[50]  items-center justify-center sm:justify-around px-10\">\r\n          {programType == \"1\" ? (\r\n            <>\r\n              <img\r\n                className=\"h-auto sm:mb-0 mb-2\"\r\n                style={{ width: \"12rem\" }}\r\n                src=\"/LSS Logo.png\"\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <img\r\n                className=\"h-auto sm:mb-0 mb-2\"\r\n                style={{ width: \"5rem\" }}\r\n                src=\"/Retail Pro Logo.png\"\r\n              />\r\n            </>\r\n          )}\r\n          <img\r\n            className=\"w-40 h-auto sm:mb-0 mb-3 mt-2 sm:mt-0\"\r\n            src=\"../IDFC-logo-website.jpg\"\r\n          />\r\n        </div>\r\n      </div>\r\n      {/* <div className=\"flex justify-center my-1\">\r\n        <img src=\"/IDFC-logo-website.jpg\" style={{ width: \"250px\" }}></img>\r\n      </div> */}\r\n      <div style={{ paddingBottom: \"200px\" }} className=\"flex justify-center\">\r\n        <div className=\"flex items-center justify-center p-5\">\r\n          <div className=\"rounded overflow-hidden shadow-lg p-5 bg-[white] \">\r\n            <h1 className=\"text-xl text-700\">Attendence Form</h1>\r\n            <br />\r\n            <form onSubmit={fetchEmployeeDetails}>\r\n              <div className=\"w-100 flex flex-wrap\">\r\n                <div className=\"px-2\">\r\n                  <label className=\"leading-loose\">Email</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    className=\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\"\r\n                    placeholder=\"Provide Email\"\r\n                    required\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"py-1 mt-7 space-x-4\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"bg-[#9d1d27] flex-inline justify-center items-center text-white px-4 py-1 rounded-md focus:outline-none\"\r\n                  >\r\n                    Find\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n            <form onSubmit={handleAttenceFormSubmit}>\r\n              <div className=\"px-2\">\r\n                <label className=\"leading-loose\">Full name</label>\r\n                <input\r\n                  name=\"fullName\"\r\n                  className=\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\"\r\n                  placeholder=\"Provide full name\"\r\n                  required\r\n                  disabled\r\n                  // readOnly\r\n                  defaultValue={employee?.name}\r\n                />\r\n              </div>\r\n              <div className=\"px-2\">\r\n                <label className=\"leading-loose\">Email</label>\r\n                <input\r\n                  name=\"email\"\r\n                  className=\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\"\r\n                  placeholder=\"Provide email\"\r\n                  required\r\n                  disabled\r\n                  defaultValue={employee?.email}\r\n                />\r\n              </div>\r\n              {/* <div className=\"px-2\">\r\n                <label className=\"leading-loose\">Phone</label>\r\n                <input\r\n                  name=\"phone\"\r\n                  className=\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\"\r\n                  placeholder=\"Provide phone\"\r\n                  disabled\r\n                  defaultValue={employee?.mobileNo}\r\n                />\r\n              </div> */}\r\n              {/* <div className=\"w-1/2 px-2\">\r\n              <label className=\"leading-loose\">Branch Name</label>\r\n              <input\r\n                name=\"branchName\"\r\n                className=\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\"\r\n                placeholder=\"Provide employee id\"\r\n                required\r\n                readOnly\r\n                defaultValue={employee.branchName}\r\n              />\r\n            </div> */}\r\n              <div className=\"py-4  space-x-4 px-2\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"bg-[#9d1d27] flex-inline justify-center items-center text-white px-4 py-2 rounded-md focus:outline-none\"\r\n                  disabled={loading}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AttendenceForm;\r\n"],"names":["location","useLocation","queryParams","URLSearchParams","search","userData","useAuth","programType","get","batchId","useParams","email","setEmail","useState","loading","setLoading","employee","setEmployee","_jsxs","children","_jsx","className","_Fragment","style","width","src","paddingBottom","onSubmit","async","e","preventDefault","params","encodeURIComponent","JSON","stringify","response","fetch","concat","process","accessToken","data","json","Object","keys","length","Error","console","log","name","firstName","lastName","error","toast","message","type","placeholder","required","value","onChange","target","form","toString","headers","method","body","status","msg","success","reset","disabled","defaultValue"],"sourceRoot":""}