"use strict";(self.webpackChunktms_frontend=self.webpackChunktms_frontend||[]).push([[4125],{4125:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(72426),l=t.n(a),r=t(72791),n=t(29655),i=t(26518),c=t(58241),o=t(80184);const d=function(e){let{session:s}=e;const[t,a]=(0,r.useState)("Select a file..."),{userData:d}=(0,c.aC)(),[m,x]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[f,g]=(0,r.useState)(!1),[u,j]=(0,r.useState)(1),[y,N]=(0,r.useState)(1),[v,b]=(0,r.useState)(30),w=async()=>{try{const e={pageLimit:v,pageNo:u},s=encodeURIComponent(JSON.stringify(e)),t=await fetch("".concat("http://localhost:8000","/api/certificates/list?filter=").concat(s,"&access_token=").concat(null===d||void 0===d?void 0:d.accessToken));if(!t.ok){const e=a&&a.message||t.statusText;return Promise.reject(e)}const a=await t.json();x(a.data.certifiates),N(a.data.lastPage)}catch(e){console.error("There was an error!",e)}};return(0,r.useEffect)((()=>{w()}),[v,u]),(0,o.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(!p.length)return void n.Am.error("Please provide users.");var s;g(!0);var t=JSON.stringify(p);console.log("======================================================",p,"-------------------------------------------",t),s=await fetch("".concat("http://localhost:8000","/api/certificates/generate-certificate?access_token=").concat(null===d||void 0===d?void 0:d.accessToken),{headers:{"Content-Type":"application/json"},method:"POST",body:t});const r=await s.json();var l;if(s.ok)"failure"===r.status?n.Am.error(r.msg):(n.Am.success(r.msg),a("Select a file..."),h([]),e.target.reset(),w());else n.Am.error(null===r||void 0===r||null===(l=r.error)||void 0===l?void 0:l.message)}catch(r){console.log(r)}finally{g(!1)}},children:[(0,o.jsx)("div",{className:"flex flex-col w-full mt-1",children:(0,o.jsx)("div",{className:"grid grid-cols-1",children:(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsxs)("span",{htmlFor:"files",className:"relative flex w-full items-center bg-gray-200 rounded-md cursor-pointer ",children:[(0,o.jsx)("input",{id:"files",name:"files",className:"absolute w-full opacity-0",type:"file",onChange:e=>{e.target.files.length&&(a(e.target.files[0].name),(0,i.Z)(e.target.files[0]).then((e=>{e.shift();let s=[];e.forEach(((e,t)=>{let a={name:e[0],email:e[1],programName:e[2],programDate:e[3],programDate2:e[4]};s.push(a)})),h(s)})))},accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}),(0,o.jsx)("span",{className:"flex rounded-l-lg py-2 text-sm px-5 h-full bg-sky-500 text-white w-fit",children:"Upload user list"}),(0,o.jsx)("p",{className:"text-sm font-medium  px-6 text-gray-700",children:t})]})})})}),(0,o.jsx)("div",{className:"pt-4 flex  space-x-4",children:(0,o.jsx)("button",{type:"submit",disabled:f,className:"bg-sky-500 flex justify-center items-center w-100 text-white px-4 py-2 rounded-md focus:outline-none",children:f?(0,o.jsx)("span",{children:"Generating..."}):(0,o.jsx)("span",{children:"Generate"})})})]}),(0,o.jsx)("h5",{className:" text-md font-medium tracking-wide my-2 text-gray-700 lg:text-xl ",children:"Certificate data"}),(0,o.jsx)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg mt-3",children:(0,o.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 ",children:[(0,o.jsx)("thead",{className:"text-md m-4 bg-sky-600 text-white   ",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Name"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Email"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Program Name"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Program Date"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Status"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Certificate File"})]})}),(0,o.jsx)("tbody",{children:m.map(((e,s)=>(0,o.jsxs)("tr",{className:"bg-white border-b",children:[(0,o.jsx)("th",{scope:"row",className:"flex flex-row items-center px-6 py-4 font-medium text-gray-900  w-44",children:null===e||void 0===e?void 0:e.name}),(0,o.jsx)("td",{className:"px-6 py-4 text-gray-900",children:null===e||void 0===e?void 0:e.email}),(0,o.jsx)("td",{className:"px-6 py-4 text-gray-900",children:null===e||void 0===e?void 0:e.programName}),(0,o.jsx)("td",{className:"px-6 py-4 text-gray-900",children:null!==e&&void 0!==e&&e.programDate?l()(null===e||void 0===e?void 0:e.programDate).format("DD-MM-YYYY"):"-"}),(0,o.jsx)("td",{className:"px-6 py-4 text-gray-900",children:null!==e&&void 0!==e&&e.response?JSON.parse(null===e||void 0===e?void 0:e.response).accepted.length?(0,o.jsx)("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:"success"}):(0,o.jsx)("span",{classNam:"inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/10",children:"Failed"}):"-"}),(0,o.jsx)("td",{className:"px-6 py-4 text-gray-900",children:(0,o.jsx)("a",{href:null===e||void 0===e?void 0:e.file,target:"_blank",rel:"noreferrer",children:"View File"})})]},s+1)))})]})}),(0,o.jsxs)("div",{className:"flex flex-row justify-around mt-10 items-center  ",children:[(0,o.jsx)("span",{className:"text-sm flex text-gray-700 "}),(0,o.jsx)("div",{className:"flex",children:(0,o.jsxs)("div",{className:"dropdown flex items-center relative",children:[(0,o.jsx)("p",{children:"Show"}),(0,o.jsx)("span",{className:"bg-gray-100 text-gray-700 mx-2  font-normal tracking-wide rounded inline-flex items-center",children:(0,o.jsxs)("select",{className:"bg-transparent px-3 py-2  outline-none ",value:v,onChange:e=>{b(e.target.value),j(1)},children:[(0,o.jsx)("option",{className:"mr-1",children:"5"}),(0,o.jsx)("option",{className:"mr-1",children:"10"}),(0,o.jsx)("option",{className:"mr-1",children:"20"}),(0,o.jsx)("option",{className:"mr-1",children:"30"}),(0,o.jsx)("option",{className:"mr-1",children:"40"}),(0,o.jsx)("option",{className:"mr-1",children:"50"}),(0,o.jsx)("option",{className:"mr-1",children:"100"}),(0,o.jsx)("option",{className:"mr-1",children:"250"}),(0,o.jsx)("option",{className:"mr-1",children:"500"})]})}),(0,o.jsx)("p",{children:"Entries"})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("a",{onClick:()=>{u<=1||j(u-1)},className:" ".concat(1===u?"hidden":"inline-flex items-center py-2 px-4 ml-3 text-sm font-medium text-gray-700 bg-gray-200 cursor-pointer rounded-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700   "),children:"Previous"}),(0,o.jsx)("a",{onClick:()=>(console.log(u),void(u>=y||j(u+1))),className:" ".concat(u>=y?"hidden":"inline-flex items-center py-2 px-4 ml-3 text-sm font-medium text-gray-700 cursor-pointer bg-gray-200 rounded-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700   "),children:"Next"})]})]})]})}}}]);
//# sourceMappingURL=4125.7864df28.chunk.js.map