"use strict";(self.webpackChunktms_frontend=self.webpackChunktms_frontend||[]).push([[308],{20308:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(72791),r=(s(24271),s(54261)),o=s(16871),c=s(43504),n=s(78820),l=s(58241),i=(s(6526),s(80184));const d=function(e){let{index:t,program:s,programManager:r,bucket:d,fetchProgramList:m,setBatchListPop:p,setId:x,setSelectedRow:h,setPopup:u}=e;const[g,f]=(0,a.useState)(!1),{userData:y,signOut:j}=(0,l.aC)(),v=(0,o.s0)(),[N,w]=(0,a.useState)("bg-sky-500 border-sky-500 hover:bg-sky-600");(0,a.useEffect)((()=>{d.map((e=>(e.id==(null===s||void 0===s?void 0:s.id)&&f(!0),e)))}),[d]),console.log("---------------progrram",s);const b=new Date(s.programStartDate);s.programStartDate=b.toISOString().split("T")[0];const k=new Date(s.programEndDate);return s.programEndDate=k.toISOString().split("T")[0],(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("tr",{className:"bg-white border-b  odd:bg-white even:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 text-gray-900",children:(0,i.jsx)("button",{type:"button",onClick:()=>{v("/program/".concat(null===s||void 0===s?void 0:s.id))},className:"border  ".concat(g?"bg-green-500 border-green-400 hover:bg-green-500":"bg-sky-500 border-sky-500 hover:bg-sky-600"," text-white rounded-md px-2 py-1  transition duration-75 ease select-none  focus:outline-none focus:shadow-outline"),children:g?"Added":"Add"})}),(0,i.jsx)("td",{className:"px-6 py-4 text-gray-900",children:s.programName}),(0,i.jsx)("td",{className:"px-6 py-4 text-gray-900",children:s.clientName}),(0,i.jsx)("td",{className:"px-6 py-4 text-gray-900",children:"1"==s.programType?"Open":"0"==s.programType?"Close":"-"}),(0,i.jsx)("td",{className:"px-6 text-gray-900",children:s.programStartDate}),(0,i.jsx)("td",{className:"px-6 text-gray-900",children:s.programEndDate}),(0,i.jsx)("td",{className:"px-6 py-4 text-gray-900",children:"1"==s.trainingType?"Class Room Training":"2"==s.trainingType?"Virtual Training":"-"}),(0,i.jsx)("td",{className:"px-6 py-4 text-gray-900",children:"1"==s.trainingType&&s.location?s.location:"-"}),(0,i.jsx)("td",{className:" flex  pl-10 flex-row px-6 py-4  mt-2",children:"1"==(null===y||void 0===y?void 0:y.userType)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-gray-700 mr-4 hover:underline cursor-pointer",children:(0,i.jsx)(c.rU,{to:"/program/UpdateProgram/".concat(s.id),children:(0,i.jsx)(n.$iz,{})})}),(0,i.jsx)("div",{className:"text-red-700 mr-4 hover:underline cursor-pointer",onClick:()=>{u(!0),h({title:s.programName,id:s.id})},children:(0,i.jsx)(n.VPh,{color:"red"})})]}):null})]})})};var m=s(22587),p=s(29655);const x=function(e){let{programList:t,setBatchListPop:s,id:o,bucket:c,setBucket:n,setId:x,next:h,previous:u,pgindex:g,page:f,setLimit:y,setPage:j,setSearch:v,search:N,fetchProgramList:w}=e;const[b,k]=(0,a.useState)(!1),[S,T]=(0,a.useState)({title:"",id:""}),{userData:P,signOut:C}=(0,l.aC)(),D=e=>{var t;if(0===c.length)n([e]);else{c.map((s=>(s.id===e.id&&(t=!0),s,s)));if(t){const t=c.findIndex((t=>t.id===e.id));let s=[...c];t>=0?s.splice(t,1):console.warn("Cannot remove : ".concat(e.batchQuestionId)),n(s)}else n([...c,e])}};return(0,i.jsxs)("div",{className:" space-y-4 flex flex-col justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-row my-4 justify-between items-center ",children:[(0,i.jsx)("div",{className:"px-2  flex w-full justify-between   ",children:(0,i.jsx)("h5",{className:"font-medium leading-none text-gray-700 ",children:"Add Program from Existing Programs"})}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none py-2  ",children:(0,i.jsx)("svg",{className:"w-5 h-5 text-gray-500 ",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,i.jsx)("input",{value:N,type:"text",id:"table-search",className:"bg-gray-50 border py-1 outline-none border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-sky-500 focus:border-sky-500 block w-80 pl-10 p-2.5  ",placeholder:"Search by Program Name",onChange:e=>v(e.target.value)})]})]}),b?(0,i.jsx)("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center   bg-gray-800/40",children:(0,i.jsx)("div",{className:"flex w-full items-start mt-10 justify-center ",children:(0,i.jsxs)("div",{className:"relative mx-20 flex flex-col  w-1/2 items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[(0,i.jsx)("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-4 "}),(0,i.jsx)("div",{id:"journal-scroll",className:"w-full max-h-[32rem] h-fit overflow-y-auto mt-8",children:(0,i.jsx)(m.Z,{title:S.title,cancelDelete:()=>k(!1),confirmDelete:()=>(async()=>{try{const e=await fetch("".concat("http://localhost:8000","/api/programs/deleteProgram/").concat(S.id,"?access_token=").concat(P.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"Delete"}),t=await e.json();if(!e.ok)throw t&&t.message||e.statusText;400===t.code?p.Am.error(t.msg):(p.Am.success(t.msg),w(),k(!1))}catch(e){console.error("There was an error!",e),"Token Expired"!==e&&"Malformed User"!==e||C()}})(S.id)})})]})})}):null,(0,i.jsx)("div",{className:"relative overflow-x-auto shadow-md rounded-lg mt-3",children:(0,i.jsxs)("table",{className:"w-full text-sm text-left  text-gray-500",children:[(0,i.jsx)("thead",{className:"text-md m-4 bg-sky-600 text-white",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium",children:"View"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium",children:"Program Name"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium",children:"Client Name"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium ",children:"Type"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium ",children:"Start Date"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium ",children:"End Date"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium ",children:"Mode"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium ",children:"Location"}),"1"==P.userType?(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium ",children:"Actions"}):(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium "})]})}),(0,i.jsx)("tbody",{children:0==t.length?(0,i.jsxs)("tr",{className:"border-b  font-medium odd:bg-white even:bg-gray-50 ",children:[(0,i.jsx)("td",{className:"px-6 py-4"}),(0,i.jsx)("td",{className:"px-6 py-4",children:"No Program Data Found!! Create a new Program"}),(0,i.jsx)("td",{className:"px-6 py-4"})]}):(0,i.jsx)(i.Fragment,{children:t.map(((e,t)=>(0,i.jsx)(d,{index:t,bucket:c,program:e,programManager:D,setId:x,setBatchListPop:s,setPopup:k,setSelectedRow:T},(0,r.Z)())))})})]})}),(0,i.jsxs)("div",{className:"flex flex-row justify-around mt-2 items-center  ",children:[(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:"dropdown flex items-center relative",children:[(0,i.jsx)("p",{children:"Show"}),(0,i.jsx)("span",{className:"bg-gray-100 text-gray-700 mx-2  font-normal tracking-wide rounded inline-flex items-center",children:(0,i.jsxs)("select",{className:"bg-transparent px-3 py-2  outline-none",onChange:e=>{y(e.target.value),j(1)},children:[(0,i.jsx)("option",{className:"mr-1 ",children:"5"}),(0,i.jsx)("option",{className:"mr-1 ",children:"10"}),(0,i.jsx)("option",{className:"mr-1 ",children:"20"}),(0,i.jsx)("option",{className:"mr-1 ",children:"30"}),(0,i.jsx)("option",{className:"mr-1 ",children:"40"}),(0,i.jsx)("option",{className:"mr-1 ",children:"50"})]})}),(0,i.jsx)("p",{children:"Programs"})]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("a",{onClick:()=>u(),className:" ".concat(1===f?"hidden":"inline-flex items-center py-2 px-4 ml-3 text-sm font-medium text-gray-700 bg-gray-200 cursor-pointer rounded-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700   "),children:"Previous"}),(0,i.jsx)("a",{onClick:()=>h(),className:" ".concat(f>=g?"hidden":"inline-flex items-center py-2 px-4 ml-3 text-sm font-medium text-gray-700 cursor-pointer bg-gray-200 rounded-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700   "),children:"Next"})]})]})]})};const h=function(e){let{id:t,setId:s,setBatchListPop:r,batchListPop:o}=e;const{userData:n,signOut:d}=(0,l.aC)(),[m,p]=(0,a.useState)(!1),[h,u]=(0,a.useState)({}),[g,f]=(0,a.useState)(1),[y,j]=(0,a.useState)(0),[v,N]=(0,a.useState)(1),[w,b]=(0,a.useState)(5),[k,S]=(0,a.useState)([]),[T,P]=(0,a.useState)([]),[C,D]=(0,a.useState)("");(0,a.useEffect)((()=>{t&&fetch("".concat("http://localhost:8000","/api/programs/getProgramById/").concat(t,"?access_token=").concat(null===n||void 0===n?void 0:n.accessToken)).then((async e=>{const t=await e.json();if(console.log(t),!e.ok){const s=t&&t.message||e.statusText;return Promise.reject(s)}u(t.data)})).catch((e=>{u({}),console.error("There was an error!",e),"Token Expired"!==e&&"Malformed User"!==e||d()}))}),[t]);const E=async()=>{try{const e={pageLimit:w,pageNo:g,search:C},t=encodeURIComponent(JSON.stringify(e)),s=await fetch("".concat("http://localhost:8000","/api/programs/list?filter=").concat(t,"&access_token=").concat(null===n||void 0===n?void 0:n.accessToken)),a=await s.json();if(!s.ok)throw a.message;S(a.data.programs),N(a.data.lastPage)}catch(e){console.log(e),"Malformed User"!==e&&"Token Expired"!==e||d()}};return(0,a.useEffect)((()=>{E()}),[g,w,C]),(0,i.jsx)("div",{className:"flex flex-row w-full h-full space-x-5 py-5",children:(0,i.jsx)("div",{className:"flex w-full h-full rounded-lg",children:(0,i.jsxs)("div",{className:"flex w-full h-full bg-white rounded-[33px] flex-col",children:[(0,i.jsx)("span",{className:"flex cursor-pointer justify-between items-center p-3 text-sm font-medium text-gray-600 bg-gray-100 hover:underline border-t border-gray-200",children:(0,i.jsx)("div",{className:"float-right rounded-[33px] bg-sky-500 border-sky-500 hover:bg-sky-600 text-white rounded-md px-2 py-1  transition duration-75 ease select-none  focus:outline-none focus:shadow-outline",children:(0,i.jsx)(c.rU,{to:"create-program",children:"Create New Program"})})}),(0,i.jsx)("div",{className:"w-full py-4 px-5",children:(0,i.jsx)(x,{setId:s,setBatchListPop:r,id:t,bucket:T,setBucket:P,programList:k,next:()=>{console.log(g),g>=v||f(g+1)},previous:()=>{g<=1||f(g-1)},pgindex:v,page:g,setPage:f,setLimit:b,setSearch:D,search:C,fetchProgramList:E})})]})})})};s(5462);const u=function(){const[e,t]=(0,a.useState)(""),{userData:s,signOut:r}=(0,l.aC)(),[o,c]=(0,a.useState)([]),[n,d]=(0,a.useState)(5),[m,p]=(0,a.useState)(0),[x,u]=(0,a.useState)(),[g,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1),[w,b]=(0,a.useState)(),[k,S]=(0,a.useState)(null),[T,P]=(0,a.useState)([]),[C,D]=(0,a.useState)([]),[E,L]=(0,a.useState)([]),[B,A]=(0,a.useState)(null),[I,M]=(0,a.useState)(null),[U,_]=(0,a.useState)([]);(0,a.useEffect)((()=>{M(null),_([])}),[y]),(0,a.useEffect)((()=>{fetch("".concat("http://localhost:8000","/api/Teams/getListofTeamsforbatch?filter=%7B%22limit%22%3A").concat(n,",%22start%22%3A").concat(m,",%22order%22%3A%22teamId%22,%22search%22%3A%22").concat(e,"%22%7D&access_token=").concat(null===s||void 0===s?void 0:s.accessToken)).then((async e=>{const t=await e.json();if(!e.ok){const s=t&&t.message||e.statusText;return Promise.reject(s)}c(t.data.list),u(t.data.totalCount)})).catch((e=>{c([]),console.error("There was an error!",e),"Token Expired"!==e&&"Malformed User"!==e||r()}))}),[y,e,n,m]),(0,a.useEffect)((()=>{O(),L([]),_([])}),[]),(0,a.useEffect)((()=>{B&&(R(),_([])),I&&z()}),[B,I]);const O=()=>{fetch("".concat("http://localhost:8000","/api/clients/listofclient?filter=%7B%22search%22%3A%22%22%7D&access_token=").concat(null===s||void 0===s?void 0:s.accessToken)).then((async e=>{const t=await e.json();if(!e.ok){const s=t&&t.message||e.statusText;return Promise.reject(s)}D(t.data)})).catch((e=>{D([]),console.error("There was an error!",e),"Token Expired"===e&&r()}))},R=()=>{fetch("".concat("http://localhost:8000","/api/projects/listofProgramName?id=").concat(B,"&filter=%7B%22search%22%3A%22%22%7D&access_token=").concat(null===s||void 0===s?void 0:s.accessToken)).then((async e=>{const t=await e.json();if(!e.ok){const s=t&&t.message||e.statusText;return Promise.reject(s)}L(t.data)})).catch((e=>{L([]),console.error("There was an error!",e),"Token Expired"!==e&&"Malformed User"!==e||r()}))},z=()=>{fetch("".concat("http://localhost:8000","/api/programTrainers/getprogramTrainersName?id=").concat(I,"&access_token=").concat(null===s||void 0===s?void 0:s.accessToken)).then((async e=>{const t=await e.json();if(!e.ok){const s=t&&t.message||e.statusText;return Promise.reject(s)}_(t.data)})).catch((e=>{_([]),console.error("There was an error!",e),"Token Expired"!==e&&"Malformed User"!==e||r()}))},F=x-5;return console.log(m,F),(0,i.jsx)("div",{className:"flex flex-col w-full mt-0 justify-center items-center ",children:(0,i.jsx)(h,{teamData:o,setBucket:P,setBatchPop:j,batchPop:y,schedulePop:g,setSchedulePop:f,setBatchListPop:N,id:k,batchListPop:v,setId:S,bucket:T})})}}}]);
//# sourceMappingURL=308.b1375705.chunk.js.map