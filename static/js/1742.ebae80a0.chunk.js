"use strict";(self.webpackChunktms_frontend=self.webpackChunktms_frontend||[]).push([[1742],{8473:(e,a,l)=>{l.d(a,{Z:()=>t});l(72791),l(86009);var r=l(66770),o=l.n(r),s=l(80184);const t=e=>{let{value:a,onChange:l}=e;return(0,s.jsx)(o(),{value:a,onChange:l})}},71742:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var r=l(72791),o=l(85880),s=l(18622),t=(l(5462),l(29655)),n=l(72426),d=l.n(n),i=l(8473),c=l(16871),u=l(58241),m=l(80184);const g=()=>{const{id:e}=(0,c.UO)();console.log("--------------id",e);const a=(0,c.s0)(),{userData:l,signOut:n}=(0,u.aC)(),[g,x]=(0,r.useState)(e),[p,f]=(0,r.useState)([]),[h,y]=(0,r.useState)(null),[v,b]=(0,r.useState)("1"),[j,N]=(0,r.useState)("");const[w,k]=(0,r.useState)(null),[S,T]=(0,r.useState)([]),[P,D]=(0,r.useState)(null),[C,E]=(0,r.useState)([]),[V,_]=(0,r.useState)(""),[q,I]=(0,r.useState)({}),[O,A]=(0,r.useState)(null),[Y,F]=(0,r.useState)(null),[M,L]=(0,r.useState)([]),[U,B]=(0,r.useState)(!1),[Z,z]=(0,r.useState)(!1),[H,R]=(0,r.useState)([]),[G,J]=(0,r.useState)(""),[K,Q]=(0,r.useState)(""),W=async e=>{try{const a=new FormData;a.append("file",e);const r=await fetch("".concat("http://localhost:8000","/api/programOutlines/updateFile/").concat(O?O.data:null,"?access_token=").concat(null===l||void 0===l?void 0:l.accessToken),{method:"PUT",body:a}),o=await r.json();r.ok?(t.Am.success("File uploaded successfully."),f([e.name]),y(o.data.id),console.log("File updated successfully.")):(console.error("Failed to updated file."),t.Am.error("File updated successfully."))}catch(a){console.error("Error updated file:",a),t.Am.error("File updated Faild.")}},X={container:e=>({...e,flex:1}),control:e=>({...e,border:"1px solid rgb(209 213 219)",boxShadow:"none","&:hover":{border:"1px solid rgb(17 24 39)"}}),input:e=>({...e,color:"rgb(75 85 99)",paddingLeft:"6px",paddingBottom:"3px",fontSize:"1rem",lineHeight:"1.25rem"}),placeholder:e=>({...e,color:"#a1a9bb",paddingLeft:"6px",fontSize:"0.870rem",lineHeight:"1.25rem"})};(0,r.useEffect)((()=>{fetch("".concat("http://localhost:8000","/api/clients/listofclient?filter=%7B%22search%22%3A%22%22%7D&access_token=").concat(null===l||void 0===l?void 0:l.accessToken)).then((async e=>{const a=await e.json();if(!e.ok){const l=a&&a.message||e.statusText;return Promise.reject(l)}T(a.data)})).catch((e=>{T([]),console.error("There was an error!",e),"Token Expired"===e&&n()}))}),[]),(0,r.useEffect)((()=>{P&&fetch("".concat("http://localhost:8000","/api/projects/listofProgramName?id=").concat(P.data,"&filter=%7B%22search%22%3A%22%22%7D&access_token=").concat(null===l||void 0===l?void 0:l.accessToken)).then((async e=>{const a=await e.json();if(!e.ok){const l=a&&a.message||e.statusText;return Promise.reject(l)}E(a.data)})).catch((e=>{E([]),console.error("There was an error!",e),"Token Expired"===e&&n()}))}),[P]);const $=null===S||void 0===S?void 0:S.map((e=>({data:null===e||void 0===e?void 0:e.client_id,label:null===e||void 0===e?void 0:e.client_name}))),ee=null===C||void 0===C?void 0:C.map((e=>({data:null===e||void 0===e?void 0:e.project_id,label:"".concat(null===e||void 0===e?void 0:e.project_title," ~ ProgramId: ").concat(null===e||void 0===e?void 0:e.project_id," ~ ").concat(null!==e&&void 0!==e&&e.location_of_training?null===e||void 0===e?void 0:e.location_of_training:"No location allocate"," ")}))),ae=async e=>{try{var r;let s=new URLSearchParams(Object.entries(e)).toString();r=await fetch("".concat("http://localhost:8000","/api/programs/edit/").concat(g,"?access_token=").concat(null===l||void 0===l?void 0:l.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:s});const n=await r.json();var o;if(r.ok)404===n.code||"failure"===n.status?t.Am.error(n.msg):(t.Am.success("Program updated successfully!!"),a("/program"));else t.Am.error(null===n||void 0===n||null===(o=n.error)||void 0===o?void 0:o.message)}catch(s){t.Am.error(s.message)}};return(0,r.useEffect)((()=>{g&&fetch("".concat("http://localhost:8000","/api/programs/getProgramById/").concat(g,"?access_token=").concat(null===l||void 0===l?void 0:l.accessToken)).then((async e=>{const a=await e.json();if(!e.ok){const l=a&&a.message||e.statusText;throw new Error(l)}console.log(a.data),I(a.data),a.data.objectives&&Q(a.data.objectives),J(a.data.color)})).catch((e=>{I({}),console.error("There was an error!",e),"Token Expired"!==e&&"Malformed User"!==e||n()}))}),[g]),(0,r.useEffect)((()=>{q&&(q.intervalDays&&k((()=>q.intervalDays.split(",").map((e=>({label:e,value:e}))))),q.clientId&&D({label:q.clientName,data:q.clientId}),q.programId&&A({label:q.programName+" ~ ProgramId: "+q.programId+" ~ "+q.location,data:q.programId}),b(q.trainingType),N(q.programType))}),[q]),console.log(O,"program"),(0,m.jsx)("div",{children:(0,m.jsx)("div",{className:"flex mt-5 flex-col w-full justify-center  ",children:(0,m.jsx)("div",{className:"relative py-5 w-full  px-1 ",children:(0,m.jsx)("div",{className:"relative px-4 py-2  rounded-md  bg-white ",children:(0,m.jsxs)("div",{className:"w-full mx-auto",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,m.jsx)("div",{className:"h-10 w-10 bg-sky-500 rounded-full flex flex-shrink-0 justify-center items-center text-white text-2xl font-semibold",children:(0,m.jsx)(o.UCm,{})}),(0,m.jsxs)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:[(0,m.jsx)("h2",{className:"leading-relaxed",children:"Update Program"}),(0,m.jsx)("p",{className:"text-gray-500 font-normal leading-relaxed text-lg",children:"Enter the program details."})]})]}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault();var a={};Array.from(e.currentTarget.elements).forEach((e=>{e.name&&(a[e.name]=e.value)})),K&&(a.objectives=K),ae(a)},className:"divide-y divide-gray-200",children:[(0,m.jsx)("div",{className:"flex flex-col w-full justify-between py-8 text-base leading-6 space-x-4 text-gray-700 sm:text-lg sm:leading-7",children:(0,m.jsxs)("div",{className:"flex flex-col w-full space-y-1",children:[(0,m.jsxs)("div",{className:"flex flex-wrap",children:[(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Client Name"}),(0,m.jsx)("div",{className:"relative focus-within:text-gray-600 text-gray-400",children:(0,m.jsx)(s.ZP,{options:$,onChange:e=>{D(e),A(null),F(null),L([])},value:P,styles:X,placeholder:"Select Client",getOptionValue:e=>e.data})}),(0,m.jsx)("input",{type:"text",name:"clientName",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Client Name",required:!0,defaultValue:null===P||void 0===P?void 0:P.label}),(0,m.jsx)("input",{type:"text",name:"clientId",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Client Name",required:!0,defaultValue:null===P||void 0===P?void 0:P.data})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program Name"}),(0,m.jsxs)("label",{className:"leading-loose",children:["Program Id:",O?O.data:null]})]}),(0,m.jsx)("div",{className:"relative focus-within:text-gray-600 text-gray-400",children:(0,m.jsx)(s.ZP,{options:ee,onChange:e=>{A(e),F(e.data)},value:O,styles:X,placeholder:"Select Program",getOptionValue:e=>e.data})}),(0,m.jsx)("input",{type:"text",name:"programName",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Name",defaultValue:null===O||void 0===O?void 0:O.label}),(0,m.jsx)("input",{type:"text",name:"programId",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Id",defaultValue:null===O||void 0===O?void 0:O.data})]})]}),(0,m.jsx)("div",{className:"flex flex-wrap",children:(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program Type"}),(0,m.jsxs)("select",{name:"programType",required:!0,onChange:function(e){N(e.target.value)},value:j,defaultValue:null===q||void 0===q?void 0:q.programType,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[(0,m.jsx)("option",{value:"",children:"Select program type"}),(0,m.jsx)("option",{value:"1",children:"Open"}),(0,m.jsx)("option",{value:"0",children:"Close"})]})]})}),(0,m.jsxs)("div",{className:"flex flex-wrap",children:[(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program Start Date"}),(0,m.jsx)("input",{type:"date",name:"programStartDate",required:!0,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Start Date",defaultValue:null!==q&&void 0!==q&&q.programStartDate?d()(null===q||void 0===q?void 0:q.programStartDate).format("YYYY-MM-DD"):""})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program Start Time"}),(0,m.jsx)("input",{type:"time",name:"programStartTime",required:!0,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Start Time",defaultValue:null===q||void 0===q?void 0:q.programStartTime})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program End Date"}),(0,m.jsx)("input",{type:"date",name:"programEndDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program End Date",required:!0,defaultValue:null!==q&&void 0!==q&&q.programEndDate?d()(null===q||void 0===q?void 0:q.programEndDate).format("YYYY-MM-DD"):""})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program End Time"}),(0,m.jsx)("input",{type:"time",name:"programEndTime",required:!0,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program End Date",defaultValue:null===q||void 0===q?void 0:q.programEndTime})]}),"1"==j?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Nomination End Date*"}),(0,m.jsx)("input",{type:"date",name:"nominationDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Date",required:!0,defaultValue:q.nominationDate?d()(q.nominationDate).format("YYYY-MM-DD"):""})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Nomination End Time*"}),(0,m.jsx)("input",{type:"time",name:"nominationTime",required:!0,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Time",defaultValue:q.nominationTime})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Nomination Limit*"}),(0,m.jsx)("input",{type:"number",name:"nominationLimit",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program nomination limit",defaultValue:q.nominationLimit,required:!0})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program Outline"}),(0,m.jsxs)("select",{name:"programOutline",defaultValue:q.programOutline,value:h,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",children:[(0,m.jsx)("option",{value:"",children:q.programOutline}),p&&p.map(((e,a)=>(0,m.jsx)("option",{value:e,children:e})))]})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Files"}),(0,m.jsx)("input",{type:"file",name:"files",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"choose file",onChange:e=>{const a=e.target.files[0];if(a){const e=a.name;_(e),W(a)}}})]})]}):null,(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Training Mode"}),(0,m.jsxs)("select",{name:"trainingType",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",value:v,required:!0,onChange:function(e){b(e.target.value)},defaultValue:null===q||void 0===q?void 0:q.trainingType,children:[(0,m.jsx)("option",{value:"1",children:"Class Room Training"}),(0,m.jsx)("option",{value:"2",children:"Virtual Training"})]})]}),"1"==v?(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Location"}),(0,m.jsx)("input",{type:"text",name:"location",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"City",defaultValue:null===q||void 0===q?void 0:q.location})]}):null,(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Program Color"}),(0,m.jsx)("input",{type:"color",name:"color",className:"block w-full",placeholder:"Program Color",required:!0,onChange:e=>{J(e.target.value)},value:G})]}),(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Status"}),(0,m.jsxs)("select",{placeholder:"Select status",name:"status",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[(0,m.jsx)("option",{value:"1",selected:1==(null===q||void 0===q?void 0:q.status),children:"Active"}),(0,m.jsx)("option",{value:"0",selected:0==(null===q||void 0===q?void 0:q.status),children:"In Active"})]})]})," ",(0,m.jsxs)("div",{className:"w-1/2 px-2",children:[(0,m.jsx)("label",{className:"leading-loose",children:"Objectives"}),(0,m.jsx)(i.Z,{value:K,onChange:e=>{Q(e)}})]})]})]})}),(0,m.jsx)("div",{className:"py-4  space-x-4",children:(0,m.jsx)("button",{type:"submit",className:"bg-sky-500 flex-inline justify-center items-center text-white px-4 py-2 rounded-md focus:outline-none",children:"Save"})})]})]})})})})})}}}]);
//# sourceMappingURL=1742.ebae80a0.chunk.js.map