"use strict";(self.webpackChunktms_frontend=self.webpackChunktms_frontend||[]).push([[1809],{8473:(e,a,r)=>{r.d(a,{Z:()=>t});r(72791),r(86009);var l=r(66770),s=r.n(l),o=r(80184);const t=e=>{let{value:a,onChange:r}=e;return(0,o.jsx)(s(),{value:a,onChange:r})}},21809:(e,a,r)=>{r.r(a),r.d(a,{default:()=>u});var l=r(72791),s=r(85880),o=r(18622),t=(r(5462),r(29655)),n=(r(72426),r(8473)),d=r(16871),i=r(58241),c=r(80184);const u=()=>{const e=(0,d.s0)(),{userData:a,signOut:r}=(0,i.aC)(),[u,m]=(0,l.useState)("1"),[x,g]=(0,l.useState)(null),[p,f]=(0,l.useState)(""),[h,y]=(0,l.useState)([]);const[b,j]=(0,l.useState)(null),[v,N]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[S,T]=(0,l.useState)(null),[P,C]=(0,l.useState)([]),[E,D]=(0,l.useState)(null),[_,q]=(0,l.useState)(null),[A,O]=(0,l.useState)(null),[F,V]=(0,l.useState)([]),[I,L]=(0,l.useState)(!1),[Z,B]=(0,l.useState)(!1),[z,H]=(0,l.useState)([]),[R,U]=(0,l.useState)(""),[M,G]=(0,l.useState)(""),J={container:e=>({...e,flex:1}),control:e=>({...e,border:"1px solid rgb(209 213 219)",boxShadow:"none","&:hover":{border:"1px solid rgb(17 24 39)"}}),input:e=>({...e,color:"rgb(75 85 99)",paddingLeft:"6px",paddingBottom:"3px",fontSize:"1rem",lineHeight:"1.25rem"}),placeholder:e=>({...e,color:"#a1a9bb",paddingLeft:"6px",fontSize:"0.870rem",lineHeight:"1.25rem"})};(0,l.useEffect)((()=>{fetch("".concat("http://localhost:8000","/api/clients/listofclient?filter=%7B%22search%22%3A%22%22%7D&access_token=").concat(null===a||void 0===a?void 0:a.accessToken)).then((async e=>{const a=await e.json();if(!e.ok){const r=a&&a.message||e.statusText;return Promise.reject(r)}N(a.data)})).catch((e=>{N([]),console.error("There was an error!",e),"Token Expired"===e&&r()}))}),[]),(0,l.useEffect)((()=>{S&&fetch("".concat("http://localhost:8000","/api/projects/listofProgramName?id=").concat(S,"&filter=%7B%22search%22%3A%22%22%7D&access_token=").concat(null===a||void 0===a?void 0:a.accessToken)).then((async e=>{const a=await e.json();if(!e.ok){const r=a&&a.message||e.statusText;return Promise.reject(r)}C(a.data)})).catch((e=>{C([]),console.error("There was an error!",e),"Token Expired"===e&&r()}))}),[S]),(0,l.useEffect)((()=>{A&&fetch("".concat("http://localhost:8000","/api/programTrainers/getprogramTrainersName?id=").concat(A,"&access_token=").concat(null===a||void 0===a?void 0:a.accessToken)).then((async e=>{const a=await e.json();if(!e.ok){const r=a&&a.message||e.statusText;return Promise.reject(r)}console.log(a.data),V(a.data)})).catch((e=>{V([]),console.error("There was an error!",e),"Token Expired"===e&&r()}))}),[A]);const K=null===v||void 0===v?void 0:v.map((e=>({data:null===e||void 0===e?void 0:e.client_id,label:null===e||void 0===e?void 0:e.client_name}))),Q=null===P||void 0===P?void 0:P.map((e=>({data:null===e||void 0===e?void 0:e.project_id,label:"".concat(null===e||void 0===e?void 0:e.project_title," ~ ProgramId: ").concat(null===e||void 0===e?void 0:e.project_id," ~ ").concat(null!==e&&void 0!==e&&e.location_of_training?null===e||void 0===e?void 0:e.location_of_training:"No location allocate"," ")}))),W=async r=>{var l;let s=new URLSearchParams(Object.entries(r)).toString();l=await fetch("".concat("http://localhost:8000","/api/programs/add?access_token=").concat(null===a||void 0===a?void 0:a.accessToken),{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:s});const o=await l.json();var n;l.ok?"failure"===o.status||409==o.code?t.Am.error(o.msg):(t.Am.success(" Program created and emails sent successfully !!"),e("/program")):t.Am.error(null===o||void 0===o||null===(n=o.error)||void 0===n?void 0:n.message)};console.log(E,"selectedProgram");const X=async e=>{try{const r=new FormData;r.append("file",e);const l=await fetch("".concat("http://localhost:8000","/api/programOutlines/uploadFile/").concat(E?E.data:null,"?access_token=").concat(null===a||void 0===a?void 0:a.accessToken),{method:"POST",body:r}),s=await l.json();l.ok?(t.Am.success("File uploaded successfully."),y([e.name]),q(s.data.id),console.log("File uploaded successfully.")):(console.error("Failed to upload file."),t.Am.error("File uploaded successfully."))}catch(r){console.error("Error uploading file:",r),t.Am.error("File uploaded successfully.")}};return(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"flex mt-1 flex-col w-full justify-center",children:(0,c.jsx)("div",{className:"relative py-5 w-full  px-1 ",children:(0,c.jsx)("div",{className:"relative px-4 py-2  rounded-md  bg-white ",children:(0,c.jsxs)("div",{className:"w-full mx-auto",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("div",{className:"h-10 w-10 bg-sky-500 rounded-full flex flex-shrink-0 justify-center items-center text-white text-2xl font-semibold",children:(0,c.jsx)(s.UCm,{})}),(0,c.jsxs)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:[(0,c.jsx)("h2",{className:"leading-relaxed",children:"Create a Program"}),(0,c.jsx)("p",{className:"text-sm text-gray-500 font-normal leading-relaxed",children:"Enter the program details."})]})]}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault();var a={};Array.from(e.currentTarget.elements).forEach((e=>{e.name&&(a[e.name]=e.value)})),M&&(a.objectives=M),console.log(a,"formData"),W(a)},className:"divide-y divide-gray-200",children:[(0,c.jsx)("div",{className:"flex flex-col w-full justify-between py-8 text-base leading-6 space-x-4 text-gray-700 sm:text-lg sm:leading-7",children:(0,c.jsxs)("div",{className:"flex flex-col w-full space-y-1",children:[(0,c.jsxs)("div",{className:"flex flex-wrap",children:[(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Client Name*"}),(0,c.jsx)("div",{className:"relative focus-within:text-gray-600 text-gray-400",children:(0,c.jsx)(o.ZP,{options:K,onChange:e=>{k(e),T(e.data),D(null),O(null),V([])},value:w,styles:J,placeholder:"Select Client",getOptionValue:e=>e.data})}),(0,c.jsx)("input",{type:"text",name:"clientName",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Client Name",required:!0,defaultValue:null===w||void 0===w?void 0:w.label}),(0,c.jsx)("input",{type:"text",name:"clientId",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Client Name",required:!0,defaultValue:null===w||void 0===w?void 0:w.data})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program Name*"}),(0,c.jsxs)("label",{className:"leading-loose",children:["Program Id:",E?E.data:null]})]}),(0,c.jsx)("div",{className:"relative focus-within:text-gray-600 text-gray-400",children:(0,c.jsx)(o.ZP,{options:Q,onChange:e=>{D(e),O(e.data)},value:E,styles:J,placeholder:"Select Program",getOptionValue:e=>e.data})}),(0,c.jsx)("input",{type:"text",name:"programName",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Name",defaultValue:null===E||void 0===E?void 0:E.label,required:!0}),(0,c.jsx)("input",{type:"text",name:"programId",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Id",defaultValue:A,required:!0})]})]}),(0,c.jsx)("div",{className:"flex flex-wrap",children:(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program Type*"}),(0,c.jsxs)("select",{name:"programType",required:!0,onChange:function(e){console.log(e.target.value),f(e.target.value)},value:p,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[(0,c.jsx)("option",{value:"",children:"Select program type"}),(0,c.jsx)("option",{value:"1",children:"Open"}),(0,c.jsx)("option",{value:"0",children:"Close"})]})]})}),(0,c.jsxs)("div",{className:"flex flex-wrap",children:[(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program Start Date*"}),(0,c.jsx)("input",{type:"date",name:"programStartDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program  Start Date",required:!0})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program Start Time*"}),(0,c.jsx)("input",{type:"time",name:"programStartTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Start Time",required:!0})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program End Date*"}),(0,c.jsx)("input",{type:"date",name:"programEndDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program End Date",required:!0})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program End Time*"}),(0,c.jsx)("input",{type:"time",name:"programEndTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program End Time",required:!0})]})]}),(0,c.jsxs)("div",{className:"flex flex-wrap",children:["1"==p?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Nomination End Date*"}),(0,c.jsx)("input",{type:"date",name:"nominationDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Date/Time",required:!0})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Nomination End Time*"}),(0,c.jsx)("input",{type:"time",name:"nominationTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Date/Time",required:!0})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Nomination Limit*"}),(0,c.jsx)("input",{type:"number",name:"nominationLimit",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program nomination limit",required:!0})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program Outline"}),(0,c.jsx)("select",{name:"programOutline",value:_,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",children:h&&h.map(((e,a)=>(0,c.jsx)("option",{value:e,children:e})))})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Files"}),(0,c.jsx)("input",{type:"file",name:"files",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"choose file",onChange:e=>{const a=e.target.files[0];if(a){const e=a.name;U(e),X(a);const r=e.split(".");y([r[0]])}}})]})]}):null,(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Training Mode*"}),(0,c.jsxs)("select",{name:"trainingType",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",value:u,onChange:function(e){m(e.target.value)},required:!0,children:[(0,c.jsx)("option",{value:"1",children:"Class Room Training"}),(0,c.jsx)("option",{value:"2",children:"Virtual Training"})]})]}),"1"==u?(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Location*"}),(0,c.jsx)("input",{type:"text",name:"location",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"City",required:!0})]}):null,(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Program Color*"}),(0,c.jsx)("input",{type:"color",name:"color",className:"block w-full",placeholder:"Program Color",required:!0})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Status*"}),(0,c.jsxs)("select",{name:"status",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[(0,c.jsx)("option",{value:"1",children:"Active"}),(0,c.jsx)("option",{value:"0",children:"In Active"})]})]}),(0,c.jsxs)("div",{className:"w-1/2 px-2",children:[(0,c.jsx)("label",{className:"leading-loose",children:"Objectives"}),(0,c.jsx)(n.Z,{value:M,onChange:e=>{G(e)}})]})]})]})}),(0,c.jsx)("div",{className:"py-4  space-x-4",children:(0,c.jsx)("button",{type:"submit",className:"bg-sky-500 flex-inline justify-center items-center text-white px-4 py-2 rounded-md focus:outline-none",children:"Create Program"})})]})]})})})})})}}}]);
//# sourceMappingURL=1809.465a258e.chunk.js.map